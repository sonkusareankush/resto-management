"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4047],{4047:(T,p,m)=>{m.r(p),m.d(p,{Tab2PageModule:()=>A});var i=m(4742),d=m(177),a=m(4341),b=m(70),c=m(467),g=m(5312),F=m(156),t=m(3953),v=m(3656),h=m(8472);function I(o,l){if(1&o){const r=t.RV6();t.j41(0,"ion-item",8)(1,"ion-label",9),t.EFF(2,"Item Name"),t.k0s(),t.nrm(3,"ion-input",10),t.j41(4,"ion-label",9),t.EFF(5,"Item Price"),t.k0s(),t.nrm(6,"ion-input",11),t.j41(7,"ion-label",9),t.EFF(8,"Item Section"),t.k0s(),t.nrm(9,"ion-input",12),t.j41(10,"ion-button",13),t.bIt("click",function(){const n=t.eBV(r).index,s=t.XpG();return t.Njj(s.removeItem(n))}),t.EFF(11,"Remove"),t.k0s()()}2&o&&t.Y8G("formGroupName",l.index)}let _=(()=>{var o;class l{constructor(e,n,s,u,f){this.modalCtrl=e,this.alertCtrl=n,this.fb=s,this.authService=u,this.platform=f}ngOnInit(){var e=this;return(0,c.A)(function*(){e.itemsForm=e.fb.group({items:e.fb.array([e.createItem()])}),e.user=yield e.authService.user,console.log(e.user),e.backButtonSubscription=e.platform.backButton.subscribeWithPriority(10,(0,c.A)(function*(){e.modalCtrl&&(console.log("model controller closed"),yield e.modalCtrl.dismiss())}))})()}get items(){return this.itemsForm.get("items")}createItem(){return this.fb.group({item_name:["",a.k0.required],item_price:[0,[a.k0.required,a.k0.min(1)]],item_section:["",a.k0.required]})}addItem(){this.items.push(this.createItem())}removeItem(e){this.items.removeAt(e)}submitForm(){var e=this;return(0,c.A)(function*(){if(e.itemsForm.invalid)return void(yield e.showAlert("Error","Please fill out all required fields correctly."));console.log(e.itemsForm.value.items);const n=yield e.user.functions.addItemsData(e.itemsForm.value.items);n.success?(yield e.showAlert("Success","Items added successfully."),e.modalCtrl.dismiss(n,"confirm"),e.itemsForm.reset(),e.items.clear(),e.addItem()):yield e.showAlert("Error",n.error)})()}showAlert(e,n){var s=this;return(0,c.A)(function*(){yield(yield s.alertCtrl.create({header:e,message:n,buttons:["OK"]})).present()})()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}ngOnDestroy(){this.backButtonSubscription&&this.backButtonSubscription.unsubscribe()}}return(o=l).\u0275fac=function(e){return new(e||o)(t.rXU(i.W3),t.rXU(i.hG),t.rXU(a.ok),t.rXU(h.u),t.rXU(v.OD))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-add-items"]],decls:15,vars:2,consts:[["slot","end"],["color","medium",3,"click"],[2,"text-align","center"],[3,"ngSubmit","formGroup"],["formArrayName","items"],[3,"formGroupName",4,"ngFor","ngForOf"],["expand","full",3,"click"],["expand","full","type","submit"],[3,"formGroupName"],["position","floating"],["formControlName","item_name"],["type","number","formControlName","item_price"],["formControlName","item_section"],["color","danger",3,"click"]],template:function(e,n){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.bIt("click",function(){return n.cancel()}),t.EFF(4,"Cancel"),t.k0s()(),t.j41(5,"ion-title",2),t.EFF(6,"Add Items"),t.k0s()()(),t.j41(7,"ion-content")(8,"form",3),t.bIt("ngSubmit",function(){return n.submitForm()}),t.j41(9,"ion-list",4),t.DNE(10,I,12,1,"ion-item",5),t.k0s(),t.j41(11,"ion-button",6),t.bIt("click",function(){return n.addItem()}),t.EFF(12,"Add Another Item"),t.k0s(),t.j41(13,"ion-button",7),t.EFF(14,"Submit"),t.k0s()()()),2&e&&(t.R7$(8),t.Y8G("formGroup",n.itemsForm),t.R7$(2),t.Y8G("ngForOf",n.items.controls))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.$w,i.uz,i.he,i.nf,i.BC,i.ai,i.su,i.Gw,d.Sq,a.qT,a.BC,a.cb,a.j4,a.JD,a.$R,a.v8]}),l})();function y(o,l){if(1&o){const r=t.RV6();t.j41(0,"ion-item")(1,"ion-label")(2,"h2"),t.EFF(3),t.k0s(),t.j41(4,"p"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s()(),t.j41(8,"ion-button",5),t.bIt("click",function(){const n=t.eBV(r).$implicit,s=t.XpG();return t.Njj(s.confirmDelete(n._id))}),t.EFF(9," Delete "),t.k0s()()}if(2&o){const r=l.$implicit;t.R7$(3),t.JRh(r.item_name),t.R7$(2),t.SpI("Price: ",r.item_price,""),t.R7$(2),t.SpI("Section: ",r.item_section,"")}}const C=[{path:"",component:(()=>{var o;class l{constructor(e,n,s){this.authService=e,this.alertCtrl=n,this.modalCtrl=s,this.itemList=[],this.app=new F.qw({id:g.c.APP_ID})}ionViewWillEnter(){var e=this;return(0,c.A)(function*(){e.user=yield e.authService.user,console.log(e.user),e.user&&e.getItems()})()}getItems(){var e=this;return(0,c.A)(function*(){console.assert(e.user.id===e.app.currentUser.id);const n=yield e.user.functions.getItemsData();e.itemList=n.result})()}confirmDelete(e){var n=this;return(0,c.A)(function*(){yield(yield n.alertCtrl.create({header:"Confirm Delete",message:"Are you sure you want to delete this item?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{n.deleteItem(e)}}]})).present()})()}deleteItem(e){var n=this;return(0,c.A)(function*(){console.log(e.toString());const s={_id:e.toString()},u=yield n.user.functions.deleteItemsData(s);console.log(u),u.success?(n.itemList=n.itemList.filter(f=>f._id!==e),n.showAlert("Success","Item deleted successfully.")):n.showAlert("Error",u.message)})()}showAlert(e,n){var s=this;return(0,c.A)(function*(){yield(yield s.alertCtrl.create({header:e,message:n,buttons:["OK"]})).present()})()}openModal(){var e=this;return(0,c.A)(function*(){const n=yield e.modalCtrl.create({component:_,initialBreakpoint:.5,breakpoints:[.25,.5,.75,1]});n.present(),yield n.onWillDismiss()})()}}return(o=l).\u0275fac=function(e){return new(e||o)(t.rXU(h.u),t.rXU(i.hG),t.rXU(i.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-tab2"]],decls:6,vars:1,consts:[[2,"top","6%","position","relative"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary",3,"click"],["name","add"],["color","danger",3,"click"]],template:function(e,n){1&e&&(t.j41(0,"ion-content")(1,"ion-list",0),t.DNE(2,y,10,3,"ion-item",1),t.k0s()(),t.j41(3,"ion-fab",2)(4,"ion-fab-button",3),t.bIt("click",function(){return n.openModal()}),t.nrm(5,"ion-icon",4),t.k0s()()),2&e&&(t.R7$(2),t.Y8G("ngForOf",n.itemList))},dependencies:[i.Jm,i.W9,i.Q8,i.YW,i.iq,i.uz,i.he,i.nf,d.Sq]}),l})()}];let k=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[b.iI.forChild(C),b.iI]}),l})(),A=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[i.bv,d.MD,a.YN,k,a.X1]}),l})()}}]);