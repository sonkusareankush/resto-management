"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4047],{4047:(k,f,m)=>{m.r(f),m.d(f,{Tab2PageModule:()=>A});var i=m(4742),d=m(177),a=m(4341),p=m(70),c=m(467),b=m(5312),g=m(156),e=m(3953),h=m(8472);function F(o,l){if(1&o){const r=e.RV6();e.j41(0,"ion-item",8)(1,"ion-label",9),e.EFF(2,"Item Name"),e.k0s(),e.nrm(3,"ion-input",10),e.j41(4,"ion-label",9),e.EFF(5,"Item Price"),e.k0s(),e.nrm(6,"ion-input",11),e.j41(7,"ion-label",9),e.EFF(8,"Item Section"),e.k0s(),e.nrm(9,"ion-input",12),e.j41(10,"ion-button",13),e.bIt("click",function(){const n=e.eBV(r).index,s=e.XpG();return e.Njj(s.removeItem(n))}),e.EFF(11,"Remove"),e.k0s()()}2&o&&e.Y8G("formGroupName",l.index)}let _=(()=>{var o;class l{constructor(t,n,s,u){this.modalCtrl=t,this.alertCtrl=n,this.fb=s,this.authService=u}ngOnInit(){var t=this;return(0,c.A)(function*(){t.itemsForm=t.fb.group({items:t.fb.array([t.createItem()])}),t.user=yield t.authService.user,console.log(t.user)})()}get items(){return this.itemsForm.get("items")}createItem(){return this.fb.group({item_name:["",a.k0.required],item_price:[0,[a.k0.required,a.k0.min(1)]],item_section:["",a.k0.required]})}addItem(){this.items.push(this.createItem())}removeItem(t){this.items.removeAt(t)}submitForm(){var t=this;return(0,c.A)(function*(){if(t.itemsForm.invalid)return void(yield t.showAlert("Error","Please fill out all required fields correctly."));console.log(t.itemsForm.value.items);const n=yield t.user.functions.addItemsData(t.itemsForm.value.items);n.success?(yield t.showAlert("Success","Items added successfully."),t.modalCtrl.dismiss(n,"confirm"),t.itemsForm.reset(),t.items.clear(),t.addItem()):yield t.showAlert("Error",n.error)})()}showAlert(t,n){var s=this;return(0,c.A)(function*(){yield(yield s.alertCtrl.create({header:t,message:n,buttons:["OK"]})).present()})()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(i.W3),e.rXU(i.hG),e.rXU(a.ok),e.rXU(h.u))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-add-items"]],decls:15,vars:2,consts:[["slot","end"],["color","medium",3,"click"],[2,"text-align","center"],[3,"ngSubmit","formGroup"],["formArrayName","items"],[3,"formGroupName",4,"ngFor","ngForOf"],["expand","full",3,"click"],["expand","full","type","submit"],[3,"formGroupName"],["position","floating"],["formControlName","item_name"],["type","number","formControlName","item_price"],["formControlName","item_section"],["color","danger",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return n.cancel()}),e.EFF(4,"Cancel"),e.k0s()(),e.j41(5,"ion-title",2),e.EFF(6,"Add Items"),e.k0s()()(),e.j41(7,"ion-content")(8,"form",3),e.bIt("ngSubmit",function(){return n.submitForm()}),e.j41(9,"ion-list",4),e.DNE(10,F,12,1,"ion-item",5),e.k0s(),e.j41(11,"ion-button",6),e.bIt("click",function(){return n.addItem()}),e.EFF(12,"Add Another Item"),e.k0s(),e.j41(13,"ion-button",7),e.EFF(14,"Submit"),e.k0s()()()),2&t&&(e.R7$(8),e.Y8G("formGroup",n.itemsForm),e.R7$(2),e.Y8G("ngForOf",n.items.controls))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.$w,i.uz,i.he,i.nf,i.BC,i.ai,i.su,i.Gw,d.Sq,a.qT,a.BC,a.cb,a.j4,a.JD,a.$R,a.v8]}),l})();function I(o,l){if(1&o){const r=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s()(),e.j41(8,"ion-button",5),e.bIt("click",function(){const n=e.eBV(r).$implicit,s=e.XpG();return e.Njj(s.confirmDelete(n._id))}),e.EFF(9," Delete "),e.k0s()()}if(2&o){const r=l.$implicit;e.R7$(3),e.JRh(r.item_name),e.R7$(2),e.SpI("Price: ",r.item_price,""),e.R7$(2),e.SpI("Section: ",r.item_section,"")}}const v=[{path:"",component:(()=>{var o;class l{constructor(t,n,s){this.authService=t,this.alertCtrl=n,this.modalCtrl=s,this.itemList=[],this.app=new g.qw({id:b.c.APP_ID})}ionViewWillEnter(){var t=this;return(0,c.A)(function*(){t.user=yield t.authService.user,console.log(t.user),t.user&&t.getItems()})()}getItems(){var t=this;return(0,c.A)(function*(){console.assert(t.user.id===t.app.currentUser.id);const n=yield t.user.functions.getItemsData();t.itemList=n.result})()}confirmDelete(t){var n=this;return(0,c.A)(function*(){yield(yield n.alertCtrl.create({header:"Confirm Delete",message:"Are you sure you want to delete this item?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{n.deleteItem(t)}}]})).present()})()}deleteItem(t){var n=this;return(0,c.A)(function*(){console.log(t.toString());const s={_id:t.toString()},u=yield n.user.functions.deleteItemsData(s);console.log(u),u.success?(n.itemList=n.itemList.filter(C=>C._id!==t),n.showAlert("Success","Item deleted successfully.")):n.showAlert("Error",u.message)})()}showAlert(t,n){var s=this;return(0,c.A)(function*(){yield(yield s.alertCtrl.create({header:t,message:n,buttons:["OK"]})).present()})()}openModal(){var t=this;return(0,c.A)(function*(){const n=yield t.modalCtrl.create({component:_,initialBreakpoint:1,breakpoints:[.25,.5,.75,1]});n.present(),yield n.onWillDismiss()})()}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(h.u),e.rXU(i.hG),e.rXU(i.W3))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-tab2"]],decls:6,vars:1,consts:[[2,"top","10%"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary"],["name","add",3,"click"],["color","danger",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",0)(1,"ion-list"),e.DNE(2,I,10,3,"ion-item",1),e.k0s()(),e.j41(3,"ion-fab",2)(4,"ion-fab-button",3)(5,"ion-icon",4),e.bIt("click",function(){return n.openModal()}),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("ngForOf",n.itemList))},dependencies:[i.Jm,i.W9,i.Q8,i.YW,i.iq,i.uz,i.he,i.nf,d.Sq]}),l})()}];let y=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(v),p.iI]}),l})(),A=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[i.bv,d.MD,a.YN,y,a.X1]}),l})()}}]);