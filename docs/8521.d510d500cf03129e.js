"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8521],{8521:(Ns,Ar,dt)=>{dt.r(Ar),dt.d(Ar,{Tab1PageModule:()=>Os});var V=dt(4742),ai=dt(177),De=dt(4341),Br=dt(70),j=dt(467);function Tr(e,t){this.v=e,this.k=t}function Fe(e){return new Tr(e,0)}function Ht(e){var t,r;function n(f,a){try{var p=e[f](a),u=p.value,d=u instanceof Tr;Promise.resolve(d?u.v:u).then(function(g){if(d){var h="return"===f?"return":"next";if(!u.k||g.done)return n(h,g);g=e[h](g).value}s(p.done?"return":"normal",g)},function(g){n("throw",g)})}catch(g){s("throw",g)}}function s(f,a){switch(f){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(f,a){return new Promise(function(p,u){var d={key:f,arg:a,resolve:p,reject:u,next:null};r?r=r.next=d:(t=r=d,n(f,a))})},"function"!=typeof e.return&&(this.return=void 0)}function ce(e){function t(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(s){return{value:s,done:n}})}return(ce=function(n){this.s=n,this.n=n.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var s=this.s.return;return void 0===s?Promise.resolve({value:n,done:!0}):t(s.apply(this.s,arguments))},throw:function(n){var s=this.s.return;return void 0===s?Promise.reject(n):t(s.apply(this.s,arguments))}},new ce(e)}Ht.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ht.prototype.next=function(e){return this._invoke("next",e)},Ht.prototype.throw=function(e){return this._invoke("throw",e)},Ht.prototype.return=function(e){return this._invoke("return",e)};for(var ut=[],st=[],gi=typeof Uint8Array<"u"?Uint8Array:Array,Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",It=0;It<64;++It)ut[It]=Me[It],st[Me.charCodeAt(It)]=It;function xr(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function vi(e){return ut[e>>18&63]+ut[e>>12&63]+ut[e>>6&63]+ut[63&e]}function _i(e,t,r){for(var s=[],f=t;f<r;f+=3)s.push(vi((e[f]<<16&16711680)+(e[f+1]<<8&65280)+(255&e[f+2])));return s.join("")}st[45]=62,st[95]=63;var Pe_toByteArray=function mi(e){var t,u,r=xr(e),n=r[0],s=r[1],f=new gi(function wi(e,t,r){return 3*(t+r)/4-r}(0,n,s)),a=0,p=s>0?n-4:n;for(u=0;u<p;u+=4)t=st[e.charCodeAt(u)]<<18|st[e.charCodeAt(u+1)]<<12|st[e.charCodeAt(u+2)]<<6|st[e.charCodeAt(u+3)],f[a++]=t>>16&255,f[a++]=t>>8&255,f[a++]=255&t;return 2===s&&(t=st[e.charCodeAt(u)]<<2|st[e.charCodeAt(u+1)]>>4,f[a++]=255&t),1===s&&(t=st[e.charCodeAt(u)]<<10|st[e.charCodeAt(u+1)]<<4|st[e.charCodeAt(u+2)]>>2,f[a++]=t>>8&255,f[a++]=255&t),f},Pe_fromByteArray=function Ei(e){for(var t,r=e.length,n=r%3,s=[],f=16383,a=0,p=r-n;a<p;a+=f)s.push(_i(e,a,a+f>p?p:a+f));return 1===n?s.push(ut[(t=e[r-1])>>2]+ut[t<<4&63]+"=="):2===n&&s.push(ut[(t=(e[r-2]<<8)+e[r-1])>>10]+ut[t>>4&63]+ut[t<<2&63]+"="),s.join("")},Rt_read=function(t,r,n,s,f){var a,p,u=8*f-s-1,d=(1<<u)-1,g=d>>1,h=-7,_=n?f-1:0,T=n?-1:1,S=t[r+_];for(_+=T,a=S&(1<<-h)-1,S>>=-h,h+=u;h>0;a=256*a+t[r+_],_+=T,h-=8);for(p=a&(1<<-h)-1,a>>=-h,h+=s;h>0;p=256*p+t[r+_],_+=T,h-=8);if(0===a)a=1-g;else{if(a===d)return p?NaN:1/0*(S?-1:1);p+=Math.pow(2,s),a-=g}return(S?-1:1)*p*Math.pow(2,a-s)},Rt_write=function(t,r,n,s,f,a){var p,u,d,g=8*a-f-1,h=(1<<g)-1,_=h>>1,T=23===f?Math.pow(2,-24)-Math.pow(2,-77):0,S=s?0:a-1,O=s?1:-1,P=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,p=h):(p=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-p))<1&&(p--,d*=2),(r+=p+_>=1?T/d:T*Math.pow(2,1-_))*d>=2&&(p++,d/=2),p+_>=h?(u=0,p=h):p+_>=1?(u=(r*d-1)*Math.pow(2,f),p+=_):(u=r*Math.pow(2,_-1)*Math.pow(2,f),p=0));f>=8;t[n+S]=255&u,S+=O,u/=256,f-=8);for(p=p<<f|u,g+=f;g>0;t[n+S]=255&p,S+=O,p/=256,g-=8);t[n+S-O]|=128*P},v=function ui(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e,t){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=function k(c){return+c!=c&&(c=0),a.alloc(+c)},t.INSPECT_MAX_BYTES=50;var n=2147483647;function f(c){if(c>n)throw new RangeError('The value "'+c+'" is invalid for option "size"');var i=new Uint8Array(c);return Object.setPrototypeOf(i,a.prototype),i}function a(c,i,o){if("number"==typeof c){if("string"==typeof i)throw new TypeError('The "string" argument must be of type string. Received type number');return g(c)}return p(c,i,o)}function p(c,i,o){if("string"==typeof c)return function h(c,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var o=0|$(c,i),l=f(o),y=l.write(c,i);return y!==o&&(l=l.slice(0,y)),l}(c,i);if(ArrayBuffer.isView(c))return function T(c){if(G(c,Uint8Array)){var i=new Uint8Array(c);return S(i.buffer,i.byteOffset,i.byteLength)}return _(c)}(c);if(null==c)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(c));if(G(c,ArrayBuffer)||c&&G(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(G(c,SharedArrayBuffer)||c&&G(c.buffer,SharedArrayBuffer)))return S(c,i,o);if("number"==typeof c)throw new TypeError('The "value" argument must not be of type number. Received type number');var l=c.valueOf&&c.valueOf();if(null!=l&&l!==c)return a.from(l,i,o);var y=function O(c){if(a.isBuffer(c)){var i=0|P(c.length),o=f(i);return 0===o.length||c.copy(o,0,0,i),o}return void 0!==c.length?"number"!=typeof c.length||Yt(c.length)?f(0):_(c):"Buffer"===c.type&&Array.isArray(c.data)?_(c.data):void 0}(c);if(y)return y;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof c[Symbol.toPrimitive])return a.from(c[Symbol.toPrimitive]("string"),i,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(c))}function u(c){if("number"!=typeof c)throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function g(c){return u(c),f(c<0?0:0|P(c))}function _(c){for(var i=c.length<0?0:0|P(c.length),o=f(i),l=0;l<i;l+=1)o[l]=255&c[l];return o}function S(c,i,o){if(i<0||c.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<i+(o||0))throw new RangeError('"length" is outside of buffer bounds');var l;return l=void 0===i&&void 0===o?new Uint8Array(c):void 0===o?new Uint8Array(c,i):new Uint8Array(c,i,o),Object.setPrototypeOf(l,a.prototype),l}function P(c){if(c>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|c}function $(c,i){if(a.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||G(c,ArrayBuffer))return c.byteLength;if("string"!=typeof c)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(c));var o=c.length,l=arguments.length>2&&!0===arguments[2];if(!l&&0===o)return 0;for(var y=!1;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return gt(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return J(c).length;default:if(y)return l?-1:gt(c).length;i=(""+i).toLowerCase(),y=!0}}function Z(c,i,o){var l=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===o||o>this.length)&&(o=this.length),o<=0)||(o>>>=0)<=(i>>>=0))return"";for(c||(c="utf8");;)switch(c){case"hex":return Q(this,i,o);case"utf8":case"utf-8":return A(this,i,o);case"ascii":return x(this,i,o);case"latin1":case"binary":return N(this,i,o);case"base64":return D(this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,i,o);default:if(l)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),l=!0}}function b(c,i,o){var l=c[i];c[i]=c[o],c[o]=l}function rt(c,i,o,l,y){if(0===c.length)return-1;if("string"==typeof o?(l=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),Yt(o=+o)&&(o=y?0:c.length-1),o<0&&(o=c.length+o),o>=c.length){if(y)return-1;o=c.length-1}else if(o<0){if(!y)return-1;o=0}if("string"==typeof i&&(i=a.from(i,l)),a.isBuffer(i))return 0===i.length?-1:nt(c,i,o,l,y);if("number"==typeof i)return i&=255,"function"==typeof Uint8Array.prototype.indexOf?y?Uint8Array.prototype.indexOf.call(c,i,o):Uint8Array.prototype.lastIndexOf.call(c,i,o):nt(c,[i],o,l,y);throw new TypeError("val must be string, number or Buffer")}function nt(c,i,o,l,y){var C,w=1,m=c.length,L=i.length;if(void 0!==l&&("ucs2"===(l=String(l).toLowerCase())||"ucs-2"===l||"utf16le"===l||"utf-16le"===l)){if(c.length<2||i.length<2)return-1;w=2,m/=2,L/=2,o/=2}function F(oi,si){return 1===w?oi[si]:oi.readUInt16BE(si*w)}if(y){var tt=-1;for(C=o;C<m;C++)if(F(c,C)===F(i,-1===tt?0:C-tt)){if(-1===tt&&(tt=C),C-tt+1===L)return tt*w}else-1!==tt&&(C-=C-tt),tt=-1}else for(o+L>m&&(o=m-L),C=o;C>=0;C--){for(var W=!0,Le=0;Le<L;Le++)if(F(c,C+Le)!==F(i,Le)){W=!1;break}if(W)return C}return-1}function Y(c,i,o,l){o=Number(o)||0;var y=c.length-o;l?(l=Number(l))>y&&(l=y):l=y;var w=i.length;l>w/2&&(l=w/2);for(var m=0;m<l;++m){var L=parseInt(i.substr(2*m,2),16);if(Yt(L))return m;c[o+m]=L}return m}function se(c,i,o,l){return yt(gt(i,c.length-o),c,o,l)}function Bt(c,i,o,l){return yt(function Ue(c){for(var i=[],o=0;o<c.length;++o)i.push(255&c.charCodeAt(o));return i}(i),c,o,l)}function Tt(c,i,o,l){return yt(J(i),c,o,l)}function xt(c,i,o,l){return yt(function Vt(c,i){for(var o,l,w=[],m=0;m<c.length&&!((i-=2)<0);++m)l=(o=c.charCodeAt(m))>>8,w.push(o%256),w.push(l);return w}(i,c.length-o),c,o,l)}function D(c,i,o){return Pe_fromByteArray(0===i&&o===c.length?c:c.slice(i,o))}function A(c,i,o){o=Math.min(c.length,o);for(var l=[],y=i;y<o;){var F,C,tt,W,w=c[y],m=null,L=w>239?4:w>223?3:w>191?2:1;if(y+L<=o)switch(L){case 1:w<128&&(m=w);break;case 2:128==(192&(F=c[y+1]))&&(W=(31&w)<<6|63&F)>127&&(m=W);break;case 3:C=c[y+2],128==(192&(F=c[y+1]))&&128==(192&C)&&(W=(15&w)<<12|(63&F)<<6|63&C)>2047&&(W<55296||W>57343)&&(m=W);break;case 4:C=c[y+2],tt=c[y+3],128==(192&(F=c[y+1]))&&128==(192&C)&&128==(192&tt)&&(W=(15&w)<<18|(63&F)<<12|(63&C)<<6|63&tt)>65535&&W<1114112&&(m=W)}null===m?(m=65533,L=1):m>65535&&(l.push((m-=65536)>>>10&1023|55296),m=56320|1023&m),l.push(m),y+=L}return function ot(c){var i=c.length;if(i<=K)return String.fromCharCode.apply(String,c);for(var o="",l=0;l<i;)o+=String.fromCharCode.apply(String,c.slice(l,l+=K));return o}(l)}t.kMaxLength=n,!(a.TYPED_ARRAY_SUPPORT=function s(){try{var c=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(c,i),42===c.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(c,i,o){return p(c,i,o)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(c,i,o){return function d(c,i,o){return u(c),c<=0?f(c):void 0!==i?"string"==typeof o?f(c).fill(i,o):f(c).fill(i):f(c)}(c,i,o)},a.allocUnsafe=function(c){return g(c)},a.allocUnsafeSlow=function(c){return g(c)},a.isBuffer=function(i){return null!=i&&!0===i._isBuffer&&i!==a.prototype},a.compare=function(i,o){if(G(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),G(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),!a.isBuffer(i)||!a.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;for(var l=i.length,y=o.length,w=0,m=Math.min(l,y);w<m;++w)if(i[w]!==o[w]){l=i[w],y=o[w];break}return l<y?-1:y<l?1:0},a.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(i,o){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return a.alloc(0);var l;if(void 0===o)for(o=0,l=0;l<i.length;++l)o+=i[l].length;var y=a.allocUnsafe(o),w=0;for(l=0;l<i.length;++l){var m=i[l];if(G(m,Uint8Array))w+m.length>y.length?a.from(m).copy(y,w):Uint8Array.prototype.set.call(y,m,w);else{if(!a.isBuffer(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(y,w)}w+=m.length}return y},a.byteLength=$,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var i=this.length;if(i%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<i;o+=2)b(this,o,o+1);return this},a.prototype.swap32=function(){var i=this.length;if(i%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<i;o+=4)b(this,o,o+3),b(this,o+1,o+2);return this},a.prototype.swap64=function(){var i=this.length;if(i%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<i;o+=8)b(this,o,o+7),b(this,o+1,o+6),b(this,o+2,o+5),b(this,o+3,o+4);return this},a.prototype.toString=function(){var i=this.length;return 0===i?"":0===arguments.length?A(this,0,i):Z.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(i){if(!a.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i||0===a.compare(this,i)},a.prototype.inspect=function(){var i="",o=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(i+=" ... "),"<Buffer "+i+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(i,o,l,y,w){if(G(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),!a.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(i));if(void 0===o&&(o=0),void 0===l&&(l=i?i.length:0),void 0===y&&(y=0),void 0===w&&(w=this.length),o<0||l>i.length||y<0||w>this.length)throw new RangeError("out of range index");if(y>=w&&o>=l)return 0;if(y>=w)return-1;if(o>=l)return 1;if(this===i)return 0;for(var m=(w>>>=0)-(y>>>=0),L=(l>>>=0)-(o>>>=0),F=Math.min(m,L),C=this.slice(y,w),tt=i.slice(o,l),W=0;W<F;++W)if(C[W]!==tt[W]){m=C[W],L=tt[W];break}return m<L?-1:L<m?1:0},a.prototype.includes=function(i,o,l){return-1!==this.indexOf(i,o,l)},a.prototype.indexOf=function(i,o,l){return rt(this,i,o,l,!0)},a.prototype.lastIndexOf=function(i,o,l){return rt(this,i,o,l,!1)},a.prototype.write=function(i,o,l,y){if(void 0===o)y="utf8",l=this.length,o=0;else if(void 0===l&&"string"==typeof o)y=o,l=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o>>>=0,isFinite(l)?(l>>>=0,void 0===y&&(y="utf8")):(y=l,l=void 0)}var w=this.length-o;if((void 0===l||l>w)&&(l=w),i.length>0&&(l<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");for(var m=!1;;)switch(y){case"hex":return Y(this,i,o,l);case"utf8":case"utf-8":return se(this,i,o,l);case"ascii":case"latin1":case"binary":return Bt(this,i,o,l);case"base64":return Tt(this,i,o,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,i,o,l);default:if(m)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),m=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;function x(c,i,o){var l="";o=Math.min(c.length,o);for(var y=i;y<o;++y)l+=String.fromCharCode(127&c[y]);return l}function N(c,i,o){var l="";o=Math.min(c.length,o);for(var y=i;y<o;++y)l+=String.fromCharCode(c[y]);return l}function Q(c,i,o){var l=c.length;(!i||i<0)&&(i=0),(!o||o<0||o>l)&&(o=l);for(var y="",w=i;w<o;++w)y+=fe[c[w]];return y}function U(c,i,o){for(var l=c.slice(i,o),y="",w=0;w<l.length-1;w+=2)y+=String.fromCharCode(l[w]+256*l[w+1]);return y}function I(c,i,o){if(c%1!=0||c<0)throw new RangeError("offset is not uint");if(c+i>o)throw new RangeError("Trying to access beyond buffer length")}function H(c,i,o,l,y,w){if(!a.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>y||i<w)throw new RangeError('"value" argument is out of bounds');if(o+l>c.length)throw new RangeError("Index out of range")}function it(c,i,o,l,y,w){if(o+l>c.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function ae(c,i,o,l,y){return i=+i,o>>>=0,y||it(c,0,o,4),Rt_write(c,i,o,l,23,4),o+4}function pt(c,i,o,l,y){return i=+i,o>>>=0,y||it(c,0,o,8),Rt_write(c,i,o,l,52,8),o+8}a.prototype.slice=function(i,o){var l=this.length;(i=~~i)<0?(i+=l)<0&&(i=0):i>l&&(i=l),(o=void 0===o?l:~~o)<0?(o+=l)<0&&(o=0):o>l&&(o=l),o<i&&(o=i);var y=this.subarray(i,o);return Object.setPrototypeOf(y,a.prototype),y},a.prototype.readUintLE=a.prototype.readUIntLE=function(i,o,l){i>>>=0,o>>>=0,l||I(i,o,this.length);for(var y=this[i],w=1,m=0;++m<o&&(w*=256);)y+=this[i+m]*w;return y},a.prototype.readUintBE=a.prototype.readUIntBE=function(i,o,l){i>>>=0,o>>>=0,l||I(i,o,this.length);for(var y=this[i+--o],w=1;o>0&&(w*=256);)y+=this[i+--o]*w;return y},a.prototype.readUint8=a.prototype.readUInt8=function(i,o){return i>>>=0,o||I(i,1,this.length),this[i]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(i,o){return i>>>=0,o||I(i,2,this.length),this[i]|this[i+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(i,o){return i>>>=0,o||I(i,2,this.length),this[i]<<8|this[i+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(i,o){return i>>>=0,o||I(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(i,o){return i>>>=0,o||I(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},a.prototype.readIntLE=function(i,o,l){i>>>=0,o>>>=0,l||I(i,o,this.length);for(var y=this[i],w=1,m=0;++m<o&&(w*=256);)y+=this[i+m]*w;return y>=(w*=128)&&(y-=Math.pow(2,8*o)),y},a.prototype.readIntBE=function(i,o,l){i>>>=0,o>>>=0,l||I(i,o,this.length);for(var y=o,w=1,m=this[i+--y];y>0&&(w*=256);)m+=this[i+--y]*w;return m>=(w*=128)&&(m-=Math.pow(2,8*o)),m},a.prototype.readInt8=function(i,o){return i>>>=0,o||I(i,1,this.length),128&this[i]?-1*(255-this[i]+1):this[i]},a.prototype.readInt16LE=function(i,o){i>>>=0,o||I(i,2,this.length);var l=this[i]|this[i+1]<<8;return 32768&l?4294901760|l:l},a.prototype.readInt16BE=function(i,o){i>>>=0,o||I(i,2,this.length);var l=this[i+1]|this[i]<<8;return 32768&l?4294901760|l:l},a.prototype.readInt32LE=function(i,o){return i>>>=0,o||I(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},a.prototype.readInt32BE=function(i,o){return i>>>=0,o||I(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},a.prototype.readFloatLE=function(i,o){return i>>>=0,o||I(i,4,this.length),Rt_read(this,i,!0,23,4)},a.prototype.readFloatBE=function(i,o){return i>>>=0,o||I(i,4,this.length),Rt_read(this,i,!1,23,4)},a.prototype.readDoubleLE=function(i,o){return i>>>=0,o||I(i,8,this.length),Rt_read(this,i,!0,52,8)},a.prototype.readDoubleBE=function(i,o){return i>>>=0,o||I(i,8,this.length),Rt_read(this,i,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(i,o,l,y){i=+i,o>>>=0,l>>>=0,y||H(this,i,o,l,Math.pow(2,8*l)-1,0);var m=1,L=0;for(this[o]=255&i;++L<l&&(m*=256);)this[o+L]=i/m&255;return o+l},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(i,o,l,y){i=+i,o>>>=0,l>>>=0,y||H(this,i,o,l,Math.pow(2,8*l)-1,0);var m=l-1,L=1;for(this[o+m]=255&i;--m>=0&&(L*=256);)this[o+m]=i/L&255;return o+l},a.prototype.writeUint8=a.prototype.writeUInt8=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,1,255,0),this[o]=255&i,o+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,2,65535,0),this[o]=255&i,this[o+1]=i>>>8,o+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=255&i,o+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=255&i,o+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},a.prototype.writeIntLE=function(i,o,l,y){if(i=+i,o>>>=0,!y){var w=Math.pow(2,8*l-1);H(this,i,o,l,w-1,-w)}var m=0,L=1,F=0;for(this[o]=255&i;++m<l&&(L*=256);)i<0&&0===F&&0!==this[o+m-1]&&(F=1),this[o+m]=(i/L|0)-F&255;return o+l},a.prototype.writeIntBE=function(i,o,l,y){if(i=+i,o>>>=0,!y){var w=Math.pow(2,8*l-1);H(this,i,o,l,w-1,-w)}var m=l-1,L=1,F=0;for(this[o+m]=255&i;--m>=0&&(L*=256);)i<0&&0===F&&0!==this[o+m+1]&&(F=1),this[o+m]=(i/L|0)-F&255;return o+l},a.prototype.writeInt8=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=255&i,o+1},a.prototype.writeInt16LE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,2,32767,-32768),this[o]=255&i,this[o+1]=i>>>8,o+2},a.prototype.writeInt16BE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=255&i,o+2},a.prototype.writeInt32LE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,4,2147483647,-2147483648),this[o]=255&i,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},a.prototype.writeInt32BE=function(i,o,l){return i=+i,o>>>=0,l||H(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},a.prototype.writeFloatLE=function(i,o,l){return ae(this,i,o,!0,l)},a.prototype.writeFloatBE=function(i,o,l){return ae(this,i,o,!1,l)},a.prototype.writeDoubleLE=function(i,o,l){return pt(this,i,o,!0,l)},a.prototype.writeDoubleBE=function(i,o,l){return pt(this,i,o,!1,l)},a.prototype.copy=function(i,o,l,y){if(!a.isBuffer(i))throw new TypeError("argument should be a Buffer");if(l||(l=0),!y&&0!==y&&(y=this.length),o>=i.length&&(o=i.length),o||(o=0),y>0&&y<l&&(y=l),y===l||0===i.length||0===this.length)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),i.length-o<y-l&&(y=i.length-o+l);var w=y-l;return this===i&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(o,l,y):Uint8Array.prototype.set.call(i,this.subarray(l,y),o),w},a.prototype.fill=function(i,o,l,y){if("string"==typeof i){if("string"==typeof o?(y=o,o=0,l=this.length):"string"==typeof l&&(y=l,l=this.length),void 0!==y&&"string"!=typeof y)throw new TypeError("encoding must be a string");if("string"==typeof y&&!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(1===i.length){var w=i.charCodeAt(0);("utf8"===y&&w<128||"latin1"===y)&&(i=w)}}else"number"==typeof i?i&=255:"boolean"==typeof i&&(i=Number(i));if(o<0||this.length<o||this.length<l)throw new RangeError("Out of range index");if(l<=o)return this;var m;if(o>>>=0,l=void 0===l?this.length:l>>>0,i||(i=0),"number"==typeof i)for(m=o;m<l;++m)this[m]=i;else{var L=a.isBuffer(i)?i:a.from(i,y),F=L.length;if(0===F)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(m=0;m<l-o;++m)this[m+o]=L[m%F]}return this};var Nr=/[^+/0-9A-Za-z-_]/g;function gt(c,i){i=i||1/0;for(var o,l=c.length,y=null,w=[],m=0;m<l;++m){if((o=c.charCodeAt(m))>55295&&o<57344){if(!y){if(o>56319){(i-=3)>-1&&w.push(239,191,189);continue}if(m+1===l){(i-=3)>-1&&w.push(239,191,189);continue}y=o;continue}if(o<56320){(i-=3)>-1&&w.push(239,191,189),y=o;continue}o=65536+(y-55296<<10|o-56320)}else y&&(i-=3)>-1&&w.push(239,191,189);if(y=null,o<128){if((i-=1)<0)break;w.push(o)}else if(o<2048){if((i-=2)<0)break;w.push(o>>6|192,63&o|128)}else if(o<65536){if((i-=3)<0)break;w.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;w.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return w}function J(c){return Pe_toByteArray(function Re(c){if((c=(c=c.split("=")[0]).trim().replace(Nr,"")).length<2)return"";for(;c.length%4!=0;)c+="=";return c}(c))}function yt(c,i,o,l){for(var y=0;y<l&&!(y+o>=i.length||y>=c.length);++y)i[y+o]=c[y];return y}function G(c,i){return c instanceof i||null!=c&&null!=c.constructor&&null!=c.constructor.name&&c.constructor.name===i.name}function Yt(c){return c!=c}var fe=function(){for(var c="0123456789abcdef",i=new Array(256),o=0;o<16;++o)for(var l=16*o,y=0;y<16;++y)i[l+y]=c[o]+c[y];return i}()}).Buffer,je=function(t,r){return(je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var f in s)s.hasOwnProperty(f)&&(n[f]=s[f])})(t,r)};function he(e,t){function r(){this.constructor=e}je(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var B=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return he(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),t}(Error),M=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return he(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),t}(TypeError);function le(e){return e&&e.Math==Math&&e}function Ir(){return le("object"==typeof globalThis&&globalThis)||le("object"==typeof window&&window)||le("object"==typeof self&&self)||le("object"==typeof global&&global)||Function("return this")()}var Ni=function(t){var r=function Oi(){var e=Ir();return"object"==typeof e.navigator&&"ReactNative"===e.navigator.product}()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=v.alloc(t),s=0;s<t;++s)n[s]=Math.floor(256*Math.random());return n},Rr=function(){if(typeof window<"u"){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(t){return e.getRandomValues(v.alloc(t))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(t){return global.crypto.getRandomValues(v.alloc(t))}:Ni}();function Et(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function zt(e){return"object"==typeof e&&null!==e}function pe(e,t){var r=!1;return function n(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];return r||(console.warn(t),r=!0),e.apply(this,s)}}function St(e){if(ArrayBuffer.isView(e))return v.from(e.buffer,e.byteOffset,e.byteLength);if(function Ur(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}(e))return v.from(e);throw new M("Must use either Buffer or TypedArray")}var Ii=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,Lr=function(e){return"string"==typeof e&&Ii.test(e)},ke=function(e){if(!Lr(e))throw new M('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var t=e.replace(/-/g,"");return v.from(t,"hex")},Dr=function(e,t){return void 0===t&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")},Pr=(Math.pow(2,63),Math.pow(2,63),Math.pow(2,53)),jr=-Math.pow(2,53),q=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(!(null==t||"string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||Array.isArray(t)))throw new M("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!=r?r:e.BSON_BINARY_SUBTYPE_DEFAULT,null==t?(this.buffer=v.alloc(e.BUFFER_SIZE),this.position=0):(this.buffer="string"==typeof t?v.from(t,"binary"):Array.isArray(t)?v.from(t):St(t),this.position=this.buffer.byteLength)}return e.prototype.put=function(t){if("string"==typeof t&&1!==t.length)throw new M("only accepts single character String");if("number"!=typeof t&&1!==t.length)throw new M("only accepts single character Uint8Array or Array");var r;if((r="string"==typeof t?t.charCodeAt(0):"number"==typeof t?t:t[0])<0||r>255)throw new M("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=v.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},e.prototype.write=function(t,r){if(this.buffer.length<(r="number"==typeof r?r:this.position)+t.length){var n=v.alloc(this.buffer.length+t.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(t)?(this.buffer.set(St(t),r),this.position=r+t.byteLength>this.position?r+t.length:this.position):"string"==typeof t&&(this.buffer.write(t,r,t.length,"binary"),this.position=r+t.length>this.position?r+t.length:this.position)},e.prototype.read=function(t,r){return this.buffer.slice(t,t+(r=r&&r>0?r:this.position))},e.prototype.value=function(t){return(t=!!t)&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(t){return this.buffer.toString(t)},e.prototype.toExtendedJSON=function(t){t=t||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return t.legacy?{$binary:r,$type:1===n.length?"0"+n:n}:{$binary:{base64:r,subType:1===n.length?"0"+n:n}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new He(this.buffer.slice(0,this.position));throw new B('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(e.SUBTYPE_UUID,'" is currently supported.'))},e.fromExtendedJSON=function(t,r){var n,s;if(r=r||{},"$binary"in t?r.legacy&&"string"==typeof t.$binary&&"$type"in t?(s=t.$type?parseInt(t.$type,16):0,n=v.from(t.$binary,"base64")):"string"!=typeof t.$binary&&(s=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=v.from(t.$binary.base64,"base64")):"$uuid"in t&&(s=4,n=ke(t.$uuid)),!n)throw new M("Unexpected Binary Extended JSON format ".concat(JSON.stringify(t)));return 4===s?new He(n):new e(n,s)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_ENCRYPTED=6,e.SUBTYPE_COLUMN=7,e.SUBTYPE_USER_DEFINED=128,e}();Object.defineProperty(q.prototype,"_bsontype",{value:"Binary"});var He=function(e){function t(r){var s,f,n=this;if(null==r)s=t.generate();else if(r instanceof t)s=v.from(r.buffer),f=r.__id;else if(ArrayBuffer.isView(r)&&16===r.byteLength)s=St(r);else{if("string"!=typeof r)throw new M("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");s=ke(r)}return(n=e.call(this,s,4)||this).__id=f,n}return he(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer},set:function(r){this.buffer=r,t.cacheHexString&&(this.__id=Dr(r))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(r){if(void 0===r&&(r=!0),t.cacheHexString&&this.__id)return this.__id;var n=Dr(this.id,r);return t.cacheHexString&&(this.__id=n),n},t.prototype.toString=function(r){return r?this.id.toString(r):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(r){if(!r)return!1;if(r instanceof t)return r.id.equals(this.id);try{return new t(r).id.equals(this.id)}catch{return!1}},t.prototype.toBinary=function(){return new q(this.id,q.SUBTYPE_UUID)},t.generate=function(){var r=Rr(16);return r[6]=15&r[6]|64,r[8]=63&r[8]|128,v.from(r)},t.isValid=function(r){return!!r&&(r instanceof t||("string"==typeof r?Lr(r):!(!Et(r)||16!==r.length||64!=(240&r[6])||128&~r[8])))},t.createFromHexString=function(r){return new t(ke(r))},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},t}(q),bt=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.code=t,this.scope=r}return e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},e}();Object.defineProperty(bt.prototype,"_bsontype",{value:"Code"});var wt=function(){function e(t,r,n,s){if(!(this instanceof e))return new e(t,r,n,s);var f=t.split(".");2===f.length&&(n=f.shift(),t=f.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=s||{}}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(t.$db=this.db),t},e.prototype.toExtendedJSON=function(t){var r={$ref:this.collection,$id:this.oid};return(t=t||{}).legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},e.fromExtendedJSON=function(t){var r=Object.assign({},t);return delete r.$ref,delete r.$id,delete r.$db,new e(t.$ref,t.$id,t.$db,r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},e}();Object.defineProperty(wt.prototype,"_bsontype",{value:"DBRef"});var at=void 0;try{at=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var Dt=4294967296,Qr=Dt*Dt,tn=Qr/2,en={},rn={},E=function(){function e(t,r,n){if(void 0===t&&(t=0),!(this instanceof e))return new e(t,r,n);"bigint"==typeof t?Object.assign(this,e.fromBigInt(t,!!r)):"string"==typeof t?Object.assign(this,e.fromString(t,!!r)):(this.low=0|t,this.high=0|r,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return e.fromBits=function(t,r,n){return new e(t,r,n)},e.fromInt=function(t,r){var n,s,f;return r?(f=0<=(t>>>=0)&&t<256)&&(s=rn[t])?s:(n=e.fromBits(t,(0|t)<0?-1:0,!0),f&&(rn[t]=n),n):(f=-128<=(t|=0)&&t<128)&&(s=en[t])?s:(n=e.fromBits(t,t<0?-1:0,!1),f&&(en[t]=n),n)},e.fromNumber=function(t,r){if(isNaN(t))return r?e.UZERO:e.ZERO;if(r){if(t<0)return e.UZERO;if(t>=Qr)return e.MAX_UNSIGNED_VALUE}else{if(t<=-tn)return e.MIN_VALUE;if(t+1>=tn)return e.MAX_VALUE}return t<0?e.fromNumber(-t,r).neg():e.fromBits(t%Dt|0,t/Dt|0,r)},e.fromBigInt=function(t,r){return e.fromString(t.toString(),r)},e.fromString=function(t,r,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r?(n=r,r=!1):r=!!r,(n=n||10)<2||36<n)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===s)return e.fromString(t.substring(1),r,n).neg();for(var f=e.fromNumber(Math.pow(n,8)),a=e.ZERO,p=0;p<t.length;p+=8){var u=Math.min(8,t.length-p),d=parseInt(t.substring(p,p+u),n);if(u<8){var g=e.fromNumber(Math.pow(n,u));a=a.mul(g).add(e.fromNumber(d))}else a=(a=a.mul(f)).add(e.fromNumber(d))}return a.unsigned=r,a},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.isLong=function(t){return zt(t)&&!0===t.__isLong__},e.fromValue=function(t,r){return"number"==typeof t?e.fromNumber(t,r):"string"==typeof t?e.fromString(t,r):e.fromBits(t.low,t.high,"boolean"==typeof r?r:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var g=0,h=0,_=0,T=0;return _+=(T+=(65535&this.low)+(65535&t.low))>>>16,h+=(_+=(this.low>>>16)+(t.low>>>16))>>>16,g+=(h+=(65535&this.high)+(65535&t.high))>>>16,g+=(this.high>>>16)+(t.high>>>16),e.fromBits((_&=65535)<<16|(T&=65535),(g&=65535)<<16|(h&=65535),this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(t){return this.compare(t)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(at){if(!this.unsigned&&-2147483648===this.high&&-1===t.low&&-1===t.high)return this;var r=(this.unsigned?at.div_u:at.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,at.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var n,s,f;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;f=e.UZERO}else{if(this.eq(e.MIN_VALUE))return t.eq(e.ONE)||t.eq(e.NEG_ONE)?e.MIN_VALUE:t.eq(e.MIN_VALUE)?e.ONE:(n=this.shr(1).div(t).shl(1)).eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(s=this.sub(t.mul(n)),f=n.add(s.div(t)));if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();f=e.ZERO}for(s=this;s.gte(t);){n=Math.max(1,Math.floor(s.toNumber()/t.toNumber()));for(var p=Math.ceil(Math.log(n)/Math.LN2),u=p<=48?1:Math.pow(2,p-48),d=e.fromNumber(n),g=d.mul(t);g.isNegative()||g.gt(s);)g=(d=e.fromNumber(n-=u,this.unsigned)).mul(t);d.isZero()&&(d=e.ONE),f=f.add(d),s=s.sub(g)}return f},e.prototype.div=function(t){return this.divide(t)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},e.prototype.eq=function(t){return this.equals(t)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var r,t=0!==this.high?this.high:this.low;for(r=31;r>0&&!(t&1<<r);r--);return 0!==this.high?r+33:r+1},e.prototype.greaterThan=function(t){return this.comp(t)>0},e.prototype.gt=function(t){return this.greaterThan(t)},e.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},e.prototype.gte=function(t){return this.greaterThanOrEqual(t)},e.prototype.ge=function(t){return this.greaterThanOrEqual(t)},e.prototype.isEven=function(){return!(1&this.low)},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return!(1&~this.low)},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return 0===this.high&&0===this.low},e.prototype.lessThan=function(t){return this.comp(t)<0},e.prototype.lt=function(t){return this.lessThan(t)},e.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},e.prototype.lte=function(t){return this.lessThanOrEqual(t)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),at){var r=(this.unsigned?at.rem_u:at.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,at.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(t){return this.modulo(t)},e.prototype.rem=function(t){return this.modulo(t)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),at){var r=at.mul(this.low,this.high,t.low,t.high);return e.fromBits(r,at.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var s=65535&this.high,f=this.low>>>16,a=65535&this.low,u=65535&t.high,d=t.low>>>16,g=65535&t.low,h=0,_=0,T=0,S=0;return T+=(S+=a*g)>>>16,_+=(T+=f*g)>>>16,T&=65535,_+=(T+=a*d)>>>16,h+=(_+=s*g)>>>16,_&=65535,h+=(_+=f*d)>>>16,_&=65535,h+=(_+=a*u)>>>16,h+=(this.high>>>16)*g+s*d+f*u+a*(t.high>>>16),e.fromBits((T&=65535)<<16|(S&=65535),(h&=65535)<<16|(_&=65535),this.unsigned)},e.prototype.mul=function(t){return this.multiply(t)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(t){return!this.equals(t)},e.prototype.neq=function(t){return this.notEquals(t)},e.prototype.ne=function(t){return this.notEquals(t)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(t){return this.shiftLeft(t)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(t){return this.shiftRight(t)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),0==(t&=63))return this;var r=this.high;return t<32?e.fromBits(this.low>>>t|r<<32-t,r>>>t,this.unsigned):e.fromBits(32===t?r:r>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},e.prototype.shru=function(t){return this.shiftRightUnsigned(t)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(t){return this.subtract(t)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Dt+(this.low>>>0):this.high*Dt+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var t=this.high,r=this.low;return[255&r,r>>>8&255,r>>>16&255,r>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},e.prototype.toBytesBE=function(){var t=this.high,r=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,r>>>24,r>>>16&255,r>>>8&255,255&r]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),n=this.div(r),s=n.mul(r).sub(this);return n.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var f=e.fromNumber(Math.pow(t,6),this.unsigned),a=this,p="";;){var u=a.div(f),g=(a.sub(u.mul(f)).toInt()>>>0).toString(t);if((a=u).isZero())return g+p;for(;g.length<6;)g="0"+g;p=""+g+p}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(t){return this.lessThanOrEqual(t)},e.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},e.TWO_PWR_24=e.fromInt(16777216),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();Object.defineProperty(E.prototype,"__isLong__",{value:!0}),Object.defineProperty(E.prototype,"_bsontype",{value:"Long"});var Fi=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Mi=/^(\+|-)?(Infinity|inf)$/i,Pi=/^(\+|-)?NaN$/i,Xt=6111,ze=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),on=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),sn=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ci=/^([-+])?(\d+)?$/;function fn(e){return!isNaN(parseInt(e,10))}function Ji(e){var t=E.fromNumber(1e9),r=E.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new E(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function Ft(e,t){throw new M('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var Zt=function(){function e(t){if(!(this instanceof e))return new e(t);if("string"==typeof t)this.bytes=e.fromString(t).bytes;else{if(!Et(t))throw new M("Decimal128 must take a Buffer or string");if(16!==t.byteLength)throw new M("Decimal128 must take a Buffer of 16 bytes");this.bytes=t}}return e.fromString=function(t){var Z,r=!1,n=!1,s=!1,f=0,a=0,p=0,u=0,d=0,g=[0],h=0,_=0,T=0,S=0,O=0,P=0,k=new E(0,0),$=new E(0,0),b=0;if(t.length>=7e3)throw new M(t+" not a valid Decimal128 string");var rt=t.match(Fi),nt=t.match(Mi),Y=t.match(Pi);if(!rt&&!nt&&!Y||0===t.length)throw new M(t+" not a valid Decimal128 string");if(rt){var se=rt[2],Bt=rt[4],Tt=rt[5],xt=rt[6];Bt&&void 0===xt&&Ft(t,"missing exponent power"),Bt&&void 0===se&&Ft(t,"missing exponent base"),void 0===Bt&&(Tt||xt)&&Ft(t,"missing e before exponent")}if(("+"===t[b]||"-"===t[b])&&(r="-"===t[b++]),!fn(t[b])&&"."!==t[b]){if("i"===t[b]||"I"===t[b])return new e(v.from(r?on:sn));if("N"===t[b])return new e(v.from(ze))}for(;fn(t[b])||"."===t[b];)"."!==t[b]?(h<34&&("0"!==t[b]||s)&&(s||(d=a),s=!0,g[_++]=parseInt(t[b],10),h+=1),s&&(p+=1),n&&(u+=1),a+=1,b+=1):(n&&Ft(t,"contains multiple periods"),n=!0,b+=1);if(n&&!a)throw new M(t+" not a valid Decimal128 string");if("e"===t[b]||"E"===t[b]){var D=t.substr(++b).match(Ci);if(!D||!D[2])return new e(v.from(ze));O=parseInt(D[0],10),b+=D[0].length}if(t[b])return new e(v.from(ze));if(T=0,h){if(S=h-1,1!==(f=p))for(;0===g[d+f-1];)f-=1}else T=0,S=0,g[0]=0,p=1,h=1,f=0;for(O<=u&&u-O>16384?O=-6176:O-=u;O>Xt;){if((S+=1)-T>34){if(g.join("").match(/^0+$/)){O=Xt;break}Ft(t,"overflow")}O-=1}for(;O<-6176||h<p;){if(0===S&&f<h){O=-6176,f=0;break}if(h<p?p-=1:S-=1,O<Xt)O+=1;else{if(g.join("").match(/^0+$/)){O=Xt;break}Ft(t,"overflow")}}if(S-T+1<f){var K=a;n&&(d+=1,K+=1),r&&(d+=1,K+=1);var ot=parseInt(t[d+S+1],10),x=0;if(ot>=5&&(x=1,5===ot))for(x=g[S]%2==1?1:0,P=d+S+2;P<K;P++)if(parseInt(t[P],10)){x=1;break}if(x)for(var N=S;N>=0;N--)if(++g[N]>9&&(g[N]=0,0===N)){if(!(O<Xt))return new e(v.from(r?on:sn));O+=1,g[N]=1}}if(k=E.fromNumber(0),$=E.fromNumber(0),0===f)k=E.fromNumber(0),$=E.fromNumber(0);else if(S-T<17)for(N=T,$=E.fromNumber(g[N++]),k=new E(0,0);N<=S;N++)$=($=$.multiply(E.fromNumber(10))).add(E.fromNumber(g[N]));else{for(N=T,k=E.fromNumber(g[N++]);N<=S-17;N++)k=(k=k.multiply(E.fromNumber(10))).add(E.fromNumber(g[N]));for($=E.fromNumber(g[N++]);N<=S;N++)$=($=$.multiply(E.fromNumber(10))).add(E.fromNumber(g[N]))}var Q=function Vi(e,t){if(!e&&!t)return{high:E.fromNumber(0),low:E.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new E(e.getLowBits(),0),s=t.shiftRightUnsigned(32),f=new E(t.getLowBits(),0),a=r.multiply(s),p=r.multiply(f),u=n.multiply(s),d=n.multiply(f);return a=a.add(p.shiftRightUnsigned(32)),p=new E(p.getLowBits(),0).add(u).add(d.shiftRightUnsigned(32)),{high:a=a.add(p.shiftRightUnsigned(32)),low:d=p.shiftLeft(32).add(new E(d.getLowBits(),0))}}(k,E.fromString("100000000000000000"));Q.low=Q.low.add($),function Yi(e,t){var r=e.high>>>0,n=t.high>>>0;return r<n||r===n&&e.low>>>0<t.low>>>0}(Q.low,$)&&(Q.high=Q.high.add(E.fromNumber(1))),Z=O+6176;var U={low:E.fromNumber(0),high:E.fromNumber(0)};Q.high.shiftRightUnsigned(49).and(E.fromNumber(1)).equals(E.fromNumber(1))?(U.high=U.high.or(E.fromNumber(3).shiftLeft(61)),U.high=U.high.or(E.fromNumber(Z).and(E.fromNumber(16383).shiftLeft(47))),U.high=U.high.or(Q.high.and(E.fromNumber(0x7fffffffffff)))):(U.high=U.high.or(E.fromNumber(16383&Z).shiftLeft(49)),U.high=U.high.or(Q.high.and(E.fromNumber(562949953421311)))),U.low=Q.low,r&&(U.high=U.high.or(E.fromString("9223372036854775808")));var I=v.alloc(16);return b=0,I[b++]=255&U.low.low,I[b++]=U.low.low>>8&255,I[b++]=U.low.low>>16&255,I[b++]=U.low.low>>24&255,I[b++]=255&U.low.high,I[b++]=U.low.high>>8&255,I[b++]=U.low.high>>16&255,I[b++]=U.low.high>>24&255,I[b++]=255&U.high.low,I[b++]=U.high.low>>8&255,I[b++]=U.high.low>>16&255,I[b++]=U.high.low>>24&255,I[b++]=255&U.high.high,I[b++]=U.high.high>>8&255,I[b++]=U.high.high>>16&255,I[b++]=U.high.high>>24&255,new e(I)},e.prototype.toString=function(){for(var t,r=0,n=new Array(36),s=0;s<n.length;s++)n[s]=0;var p,d,g,f=0,a=!1,u={parts:[0,0,0,0]},h=[];f=0;var _=this.bytes,T=_[f++]|_[f++]<<8|_[f++]<<16|_[f++]<<24,S=_[f++]|_[f++]<<8|_[f++]<<16|_[f++]<<24,O=_[f++]|_[f++]<<8|_[f++]<<16|_[f++]<<24,P=_[f++]|_[f++]<<8|_[f++]<<16|_[f++]<<24;f=0,(new E(T,S),new E(O,P)).lessThan(E.ZERO)&&h.push("-");var $=P>>26&31;if($>>3==3){if(30===$)return h.join("")+"Infinity";if(31===$)return"NaN";t=P>>15&16383,p=8+(P>>14&1)}else p=P>>14&7,t=P>>17&16383;var Z=t-6176;if(u.parts[0]=(16383&P)+((15&p)<<14),u.parts[1]=O,u.parts[2]=S,u.parts[3]=T,0===u.parts[0]&&0===u.parts[1]&&0===u.parts[2]&&0===u.parts[3])a=!0;else for(g=3;g>=0;g--){var b=0,rt=Ji(u);if(u=rt.quotient,b=rt.rem.low)for(d=8;d>=0;d--)n[9*g+d]=b%10,b=Math.floor(b/10)}if(a)r=1,n[f]=0;else for(r=36;!n[f];)r-=1,f+=1;var nt=r-1+Z;if(nt>=34||nt<=-7||Z>0){if(r>34)return h.push("".concat(0)),Z>0?h.push("E+".concat(Z)):Z<0&&h.push("E".concat(Z)),h.join("");for(h.push("".concat(n[f++])),(r-=1)&&h.push("."),s=0;s<r;s++)h.push("".concat(n[f++]));h.push("E"),h.push(nt>0?"+".concat(nt):"".concat(nt))}else if(Z>=0)for(s=0;s<r;s++)h.push("".concat(n[f++]));else{var Y=r+Z;if(Y>0)for(s=0;s<Y;s++)h.push("".concat(n[f++]));else h.push("0");for(h.push(".");Y++<0;)h.push("0");for(s=0;s<r-Math.max(Y-1,0);s++)h.push("".concat(n[f++]))}return h.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},e}();Object.defineProperty(Zt.prototype,"_bsontype",{value:"Decimal128"});var Mt=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},e.fromExtendedJSON=function(t,r){var n=parseFloat(t.$numberDouble);return r&&r.relaxed?n:new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},e}();Object.defineProperty(Mt.prototype,"_bsontype",{value:"Double"});var Pt=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=0|+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},e}();Object.defineProperty(Pt.prototype,"_bsontype",{value:"Int32"});var Kt=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();Object.defineProperty(Kt.prototype,"_bsontype",{value:"MaxKey"});var qt=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();Object.defineProperty(qt.prototype,"_bsontype",{value:"MinKey"});var Hi=new RegExp("^[0-9a-fA-F]{24}$"),Ot=null,ht=Symbol("id"),z=function(){function e(t){if(!(this instanceof e))return new e(t);var r;if("object"==typeof t&&t&&"id"in t){if("string"!=typeof t.id&&!ArrayBuffer.isView(t.id))throw new M("Argument passed in must have an id that is of type string or Buffer");r="toHexString"in t&&"function"==typeof t.toHexString?v.from(t.toHexString(),"hex"):t.id}else r=t;if(null==r||"number"==typeof r)this[ht]=e.generate("number"==typeof r?r:void 0);else if(ArrayBuffer.isView(r)&&12===r.byteLength)this[ht]=r instanceof v?r:St(r);else{if("string"!=typeof r)throw new M("Argument passed in does not match the accepted types");if(12===r.length){var n=v.from(r);if(12!==n.byteLength)throw new M("Argument passed in must be a string of 12 bytes");this[ht]=n}else{if(24!==r.length||!Hi.test(r))throw new M("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");this[ht]=v.from(r,"hex")}}e.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(e.prototype,"id",{get:function(){return this[ht]},set:function(t){this[ht]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){"number"!=typeof t&&(t=Math.floor(Date.now()/1e3));var r=e.getInc(),n=v.alloc(12);return n.writeUInt32BE(t,0),null===Ot&&(Ot=Rr(5)),n[4]=Ot[0],n[5]=Ot[1],n[6]=Ot[2],n[7]=Ot[3],n[8]=Ot[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(null==t)return!1;if(t instanceof e)return this[ht][11]===t[ht][11]&&this[ht].equals(t[ht]);if("string"==typeof t&&e.isValid(t)&&12===t.length&&Et(this.id))return t===v.prototype.toString.call(this.id,"latin1");if("string"==typeof t&&e.isValid(t)&&24===t.length)return t.toLowerCase()===this.toHexString();if("string"==typeof t&&e.isValid(t)&&12===t.length)return v.from(t).equals(this.id);if("object"==typeof t&&"toHexString"in t&&"function"==typeof t.toHexString){var r=t.toHexString(),n=this.toHexString().toLowerCase();return"string"==typeof r&&r.toLowerCase()===n}return!1},e.prototype.getTimestamp=function(){var t=new Date,r=this.id.readUInt32BE(0);return t.setTime(1e3*Math.floor(r)),t},e.createPk=function(){return new e},e.createFromTime=function(t){var r=v.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(t,0),new e(r)},e.createFromHexString=function(t){if(typeof t>"u"||null!=t&&24!==t.length)throw new M("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(v.from(t,"hex"))},e.isValid=function(t){if(null==t)return!1;try{return new e(t),!0}catch{return!1}},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},e.index=Math.floor(16777215*Math.random()),e}();Object.defineProperty(z.prototype,"generate",{value:pe(function(e){return z.generate(e)},"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(z.prototype,"getInc",{value:pe(function(){return z.getInc()},"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(z.prototype,"get_inc",{value:pe(function(){return z.getInc()},"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(z,"get_inc",{value:pe(function(){return z.getInc()},"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(z.prototype,"_bsontype",{value:"ObjectID"});var Nt=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this.pattern=t,this.options=function Gi(e){return e.split("").sort().join("")}(null!=r?r:""),-1!==this.pattern.indexOf("\0"))throw new B("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(-1!==this.options.indexOf("\0"))throw new B("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new B("The regular expression option [".concat(this.options[n],"] is not supported"))}return e.parseOptions=function(t){return t?t.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(t){return(t=t||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t){if("string"==typeof t.$regex)return new e(t.$regex,e.parseOptions(t.$options));if("BSONRegExp"===t.$regex._bsontype)return t}if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new M("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(t)))},e}();Object.defineProperty(Nt.prototype,"_bsontype",{value:"BSONRegExp"});var Qt=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();Object.defineProperty(Qt.prototype,"_bsontype",{value:"Symbol"});var me=function(e){function t(r,n){var s=this;return s instanceof t?(s=E.isLong(r)?e.call(this,r.low,r.high,!0)||this:zt(r)&&typeof r.t<"u"&&typeof r.i<"u"?e.call(this,r.i,r.t,!0)||this:e.call(this,r,n,!0)||this,Object.defineProperty(s,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),s):new t(r,n)}return he(t,e),t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(r){return new t(E.fromInt(r,!0))},t.fromNumber=function(r){return new t(E.fromNumber(r,!0))},t.fromBits=function(r,n){return new t(r,n)},t.fromString=function(r,n){return new t(E.fromString(r,!0,n))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(r){return new t(r.$timestamp)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},t.MAX_VALUE=E.MAX_UNSIGNED_VALUE,t}(E);var un=2147483647,hn=-2147483648,ln=0x8000000000000000,pn=-0x8000000000000000,Xi={$oid:z,$binary:q,$uuid:q,$symbol:Qt,$numberInt:Pt,$numberDecimal:Zt,$numberDouble:Mt,$numberLong:E,$minKey:qt,$maxKey:Kt,$regex:Nt,$regularExpression:Nt,$timestamp:me};function gn(e,t){if(void 0===t&&(t={}),"number"==typeof e){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=hn&&e<=un)return new Pt(e);if(e>=pn&&e<=ln)return E.fromNumber(e)}return new Mt(e)}if(null==e||"object"!=typeof e)return e;if(e.$undefined)return null;for(var r=Object.keys(e).filter(function(h){return h.startsWith("$")&&null!=e[h]}),n=0;n<r.length;n++){var s=Xi[r[n]];if(s)return s.fromExtendedJSON(e,t)}if(null!=e.$date){var f=e.$date,a=new Date;return t.legacy?"number"==typeof f?a.setTime(f):"string"==typeof f&&a.setTime(Date.parse(f)):"string"==typeof f?a.setTime(Date.parse(f)):E.isLong(f)?a.setTime(f.toNumber()):"number"==typeof f&&t.relaxed&&a.setTime(f),a}if(null!=e.$code){var p=Object.assign({},e);return e.$scope&&(p.$scope=gn(e.$scope)),bt.fromExtendedJSON(e)}if(function Kr(e){return zt(e)&&null!=e.$id&&"string"==typeof e.$ref&&(null==e.$db||"string"==typeof e.$db)}(e)||e.$dbPointer){var u=e.$ref?e:e.$dbPointer;if(u instanceof wt)return u;var d=Object.keys(u).filter(function(h){return h.startsWith("$")}),g=!0;if(d.forEach(function(h){-1===["$ref","$id","$db"].indexOf(h)&&(g=!1)}),g)return wt.fromExtendedJSON(u)}return e}function yn(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function mt(e,t){if(("object"==typeof e||"function"==typeof e)&&null!==e){var r=t.seenObjects.findIndex(function(k){return k.obj===e});if(-1!==r){var n=t.seenObjects.map(function(k){return k.propertyName}),s=n.slice(0,r).map(function(k){return"".concat(k," -> ")}).join(""),f=n[r],a=" -> "+n.slice(r+1,n.length-1).map(function(k){return"".concat(k," -> ")}).join(""),p=n[n.length-1],u=" ".repeat(s.length+f.length/2),d="-".repeat(a.length+(f.length+p.length)/2-1);throw new M("Converting circular structure to EJSON:\n"+"    ".concat(s).concat(f).concat(a).concat(p,"\n")+"    ".concat(u,"\\").concat(d,"/"))}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return function Zi(e,t){return e.map(function(r,n){t.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return mt(r,t)}finally{t.seenObjects.pop()}})}(e,t);if(void 0===e)return null;if(e instanceof Date||function Gt(e){return zt(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)){var g=e.getTime(),h=g>-1&&g<2534023188e5;return t.legacy?t.relaxed&&h?{$date:e.getTime()}:{$date:yn(e)}:t.relaxed&&h?{$date:yn(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(!("number"!=typeof e||t.relaxed&&isFinite(e))){if(Math.floor(e)===e){var T=e>=pn&&e<=ln;if(e>=hn&&e<=un)return{$numberInt:e.toString()};if(T)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp||function Lt(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)){var S=e.flags;if(void 0===S){var O=e.toString().match(/[gimuy]*$/);O&&(S=O[0])}return new Nt(e.source,S).toExtendedJSON(t)}return null!=e&&"object"==typeof e?function qi(e,t){if(null==e||"object"!=typeof e)throw new B("not an object instance");var r=e._bsontype;if(typeof r>"u"){var n={};for(var s in e){t.seenObjects.push({propertyName:s,obj:null});try{var f=mt(e[s],t);"__proto__"===s?Object.defineProperty(n,s,{value:f,writable:!0,enumerable:!0,configurable:!0}):n[s]=f}finally{t.seenObjects.pop()}}return n}if(function cn(e){return zt(e)&&Reflect.has(e,"_bsontype")&&"string"==typeof e._bsontype}(e)){var a=e;if("function"!=typeof a.toExtendedJSON){var p=Ki[e._bsontype];if(!p)throw new M("Unrecognized or invalid _bsontype: "+e._bsontype);a=p(a)}return"Code"===r&&a.scope?a=new bt(a.code,mt(a.scope,t)):"DBRef"===r&&a.oid&&(a=new wt(mt(a.collection,t),mt(a.oid,t),mt(a.db,t),mt(a.fields,t))),a.toExtendedJSON(t)}throw new B("_bsontype must be a string, but was: "+typeof r)}(e,t):e}var vt,Ki={Binary:function(e){return new q(e.value(),e.sub_type)},Code:function(e){return new bt(e.code,e.scope)},DBRef:function(e){return new wt(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new Zt(e.bytes)},Double:function(e){return new Mt(e.value)},Int32:function(e){return new Pt(e.value)},Long:function(e){return E.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new Kt},MinKey:function(){return new qt},ObjectID:function(e){return new z(e)},ObjectId:function(e){return new z(e)},BSONRegExp:function(e){return new Nt(e.pattern,e.options)},Symbol:function(e){return new Qt(e.value)},Timestamp:function(e){return me.fromBits(e.low,e.high)}};!function(e){function t(f,a){var p=Object.assign({},{relaxed:!0,legacy:!1},a);return"boolean"==typeof p.relaxed&&(p.strict=!p.relaxed),"boolean"==typeof p.strict&&(p.relaxed=!p.strict),JSON.parse(f,function(u,d){if(-1!==u.indexOf("\0"))throw new B("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(u)));return gn(d,p)})}function r(f,a,p,u){null!=p&&"object"==typeof p&&(u=p,p=0),null!=a&&"object"==typeof a&&!Array.isArray(a)&&(u=a,a=void 0,p=0);var g=mt(f,Object.assign({relaxed:!0,legacy:!1},u,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(g,a,p)}e.parse=t,e.stringify=r,e.serialize=function n(f,a){return a=a||{},JSON.parse(r(f,a))},e.deserialize=function s(f,a){return a=a||{},t(JSON.stringify(f),a)}}(vt||(vt={})),Ir().Map||function(){function e(t){void 0===t&&(t=[]),this._keys=[],this._values={};for(var r=0;r<t.length;r++)if(null!=t[r]){var n=t[r],s=n[0],f=n[1];this._keys.push(s),this._values[s]={v:f,i:this._keys.length-1}}}e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(t){var r=this._values[t];return null!=r&&(delete this._values[t],this._keys.splice(r.i,1),!0)},e.prototype.entries=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:void 0!==n?[n,t._values[n].v]:void 0,done:void 0===n}}}},e.prototype.forEach=function(t,r){r=r||this;for(var n=0;n<this._keys.length;n++){var s=this._keys[n];t.call(r,this._values[s].v,s,r)}},e.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},e.prototype.has=function(t){return null!=this._values[t]},e.prototype.keys=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:void 0!==n?n:void 0,done:void 0===n}}}},e.prototype.set=function(t,r){return this._values[t]?(this._values[t].v=r,this):(this._keys.push(t),this._values[t]={v:r,i:this._keys.length-1},this)},e.prototype.values=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:void 0!==n?t._values[n].v:void 0,done:void 0===n}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0})}(),E.fromNumber(Pr),E.fromNumber(jr);var ee=new Uint8Array(8);new DataView(ee.buffer,ee.byteOffset,ee.byteLength),v.alloc(17825792);var On=function(e,t,r){if(r||2===arguments.length)for(var f,n=0,s=t.length;n<s;n++)(f||!(n in t))&&(f||(f=Array.prototype.slice.call(t,0,n)),f[n]=t[n]);return e.concat(f||Array.prototype.slice.call(t))},mo=function(){return function e(t,r,n){this.name=t,this.version=r,this.os=n,this.type="browser"}}(),vo=function(){return function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}}(),_o=function(){return function e(t,r,n,s){this.name=t,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}}(),Eo=function(){return function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}(),So=function(){return function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}(),Oo=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,No=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],An=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Bn(e){var t=function Bo(e){return""!==e&&No.reduce(function(t,r){var n=r[0];if(t)return t;var f=r[1].exec(e);return!!f&&[n,f]},!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new Eo;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<3&&(s=On(On([],s,!0),function Io(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-s.length),!0)):s=[];var f=s.join("."),a=function To(e){for(var t=0,r=An.length;t<r;t++){var n=An[t],s=n[0];if(n[1].exec(e))return s}return null}(e),p=Oo.exec(e);return p&&p[1]?new _o(r,f,a,p[1]):new mo(r,f,a)}const Ro=globalThis.fetch.bind(globalThis),Lo="function"==typeof atob,Do="function"==typeof btoa,jt="function"==typeof Buffer,xn="function"==typeof TextDecoder?new TextDecoder:void 0,In="function"==typeof TextEncoder?new TextEncoder:void 0,ie=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Oe=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(ie),Fo=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,X=String.fromCharCode.bind(String),Rn="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Ln=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),gr=Do?e=>btoa(e):jt?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,r,n,s,f="";const a=e.length%3;for(let p=0;p<e.length;){if((r=e.charCodeAt(p++))>255||(n=e.charCodeAt(p++))>255||(s=e.charCodeAt(p++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|s,f+=ie[t>>18&63]+ie[t>>12&63]+ie[t>>6&63]+ie[63&t]}return a?f.slice(0,a-3)+"===".substring(a):f},yr=jt?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,s=e.length;n<s;n+=4096)r.push(X.apply(null,e.subarray(n,n+4096)));return gr(r.join(""))},Mo=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?X(192|t>>>6)+X(128|63&t):X(224|t>>>12&15)+X(128|t>>>6&63)+X(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return X(240|t>>>18&7)+X(128|t>>>12&63)+X(128|t>>>6&63)+X(128|63&t)},Po=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Mn=jt?e=>Buffer.from(e,"utf8").toString("base64"):In?e=>yr(In.encode(e)):e=>gr((e=>e.replace(Po,Mo))(e)),jo=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Co=e=>{switch(e.length){case 4:var r=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return X(55296+(r>>>10))+X(56320+(1023&r));case 3:return X((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return X((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},dr=Lo?e=>atob(Ln(e)):jt?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!Fo.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,s,r="";for(let f=0;f<e.length;)t=Oe[e.charAt(f++)]<<18|Oe[e.charAt(f++)]<<12|(n=Oe[e.charAt(f++)])<<6|(s=Oe[e.charAt(f++)]),r+=64===n?X(t>>16&255):64===s?X(t>>16&255,t>>8&255):X(t>>16&255,t>>8&255,255&t);return r},kn=jt?e=>Rn(Buffer.from(e,"base64")):e=>Rn(dr(e).split("").map(t=>t.charCodeAt(0))),ko=jt?e=>Buffer.from(e,"base64").toString("utf8"):xn?e=>xn.decode(kn(e)):e=>(e=>e.replace(jo,Co))(dr(e)),Ae_encode=(e,t=!1)=>t?(e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"))(Mn(e)):Mn(e),Ae_decode=e=>ko((e=>Ln(e.replace(/[-_]/g,t=>"-"==t?"+":"/")))(e)),Wo={relaxed:!1};function Hn(e){return vt.serialize(e,Wo)}function Gn(e){return Array.isArray(e)?e.map(t=>vt.deserialize(t)):vt.deserialize(e)}var zn=function(e){return e.Normal="normal",e.Server="server",e}(zn||{}),lt=function(e){return e.NAME="name",e.EMAIL="email",e.PICTURE="picture",e.FIRST_NAME="first_name",e.LAST_NAME="last_name",e.GENDER="gender",e.BIRTHDAY="birthday",e.MIN_AGE="min_age",e.MAX_AGE="max_age",e}(lt||{});const Xn={[lt.NAME]:"name",[lt.EMAIL]:"email",[lt.PICTURE]:"pictureUrl",[lt.FIRST_NAME]:"firstName",[lt.LAST_NAME]:"lastName",[lt.GENDER]:"gender",[lt.BIRTHDAY]:"birthday",[lt.MIN_AGE]:"minAge",[lt.MAX_AGE]:"maxAge"};class Zn{constructor(t){if(this.type=zn.Normal,this.identities=[],"object"==typeof t&&null!==t){const{type:r,identities:n,data:s}=t;if("string"!=typeof r)throw new Error("Expected 'type' in the response body");if(this.type=r,!Array.isArray(n))throw new Error("Expected 'identities' in the response body");if(this.identities=n.map(f=>{const{id:a,provider_type:p}=f;return{id:a,providerType:p}}),"object"!=typeof s||null===s)throw new Error("Expected 'data' in the response body");{const f=Object.fromEntries(Object.entries(s).map(([a,p])=>a in Xn?[Xn[a],p]:[a,p]));this.data=Gn(f)}}else this.data={}}}let Be=(()=>{class e{constructor(r,n){this.storage=r,this.keyPart=n}get(r){return this.storage.get(this.keyPart+e.PART_SEPARATOR+r)}set(r,n){return this.storage.set(this.keyPart+e.PART_SEPARATOR+r,n)}remove(r){return this.storage.remove(this.keyPart+e.PART_SEPARATOR+r)}prefix(r){return new e(this,r)}clear(r=""){return this.storage.clear(this.keyPart+e.PART_SEPARATOR+r)}addListener(r){return this.storage.addListener(r)}removeListener(r){return this.storage.addListener(r)}}return e.PART_SEPARATOR=":",e})();const mr="accessToken",vr="refreshToken",_r="profile",Er="providerType";class Vo extends Be{constructor(t,r){super(t,`user(${r})`)}get accessToken(){return this.get(mr)}set accessToken(t){null===t?this.remove(mr):this.set(mr,t)}get refreshToken(){return this.get(vr)}set refreshToken(t){null===t?this.remove(vr):this.set(vr,t)}get profile(){const t=this.get(_r);if(t){const r=new Zn;return Object.assign(r,JSON.parse(t)),r}}set profile(t){t?this.set(_r,JSON.stringify(t)):this.remove(_r)}get providerType(){const t=this.get(Er);if(t)return t}set providerType(t){t?this.set(Er,t):this.remove(Er)}}function Sr(e){return Object.fromEntries(Object.entries(e).filter(t=>typeof t[1]<"u"))}function Kn(e,t=!0){const r=Sr(e);return(t&&Object.keys(r).length>0?"?":"")+Object.entries(r).map(([s,f])=>`${s}=${encodeURIComponent(f)}`).join("&")}const Go=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];function Xo(e){return function zo(e){for(const t of e)if("object"==typeof t&&t)for(const[r,n]of Object.entries(t))void 0===n&&delete t[r];return e}(e).map(r=>"object"==typeof r?Hn(r):r)}class Te{static create(t,r={}){const n=new Te(t,r);return new Proxy(n,{get(s,f,a){if("string"==typeof f&&-1===Go.indexOf(f))return s.callFunction.bind(s,f);{const p=Reflect.get(s,f,a);return"function"==typeof p?p.bind(s):p}}})}constructor(t,r={}){this.fetcher=t,this.serviceName=r.serviceName,this.argsTransformation=r.argsTransformation||Xo}callFunction(t,...r){var n=this;return(0,j.A)(function*(){const s={name:t,arguments:n.argsTransformation?n.argsTransformation(r):r};return n.serviceName&&(s.service=n.serviceName),n.fetcher.fetchJSON({method:"POST",path:n.fetcher.appRoute.functionsCall().path,body:s})})()}callFunctionStreaming(t,...r){const n={name:t,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(n.service=this.serviceName);const s=this.fetcher.appRoute,f=Kn({baas_request:Ae_encode(JSON.stringify(n))});return this.fetcher.fetchStream({method:"GET",path:s.functionsCall().path+f})}}class Zo{constructor(t,r="local-userpass"){this.fetcher=t,this.providerName=r}registerUser(t){var r=this;return(0,j.A)(function*(){const n=r.fetcher.appRoute;yield r.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(r.providerName).register().path,body:t})})()}confirmUser(t){var r=this;return(0,j.A)(function*(){const n=r.fetcher.appRoute;yield r.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(r.providerName).confirm().path,body:t})})()}resendConfirmationEmail(t){var r=this;return(0,j.A)(function*(){const n=r.fetcher.appRoute;yield r.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(r.providerName).confirmSend().path,body:t})})()}retryCustomConfirmation(t){var r=this;return(0,j.A)(function*(){const n=r.fetcher.appRoute;yield r.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(r.providerName).confirmCall().path,body:t})})()}resetPassword(t){var r=this;return(0,j.A)(function*(){const n=r.fetcher.appRoute;yield r.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(r.providerName).reset().path,body:t})})()}sendResetPasswordEmail(t){var r=this;return(0,j.A)(function*(){const n=r.fetcher.appRoute;yield r.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(r.providerName).resetSend().path,body:t})})()}callResetPasswordFunction(t,...r){var n=this;return(0,j.A)(function*(){const s=n.fetcher.appRoute;yield n.fetcher.fetchJSON({method:"POST",path:s.emailPasswordAuth(n.providerName).resetCall().path,body:{...t,arguments:r}})})()}}var ft_api=function Ko(){return{path:"/api/client/v2.0",app(e){return{path:this.path+`/app/${e}`,location(){return{path:this.path+"/location"}},authProvider(t){return{path:this.path+`/auth/providers/${t}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(t){return{...this.authProvider(t),register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},confirmCall(){return{path:this.path+"/confirm/call"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(e){return{path:this.path+`/${e}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}},delete(){return{path:this.path+"/delete"}}}}}};class qo{constructor(t){this.fetcher=t}create(t){return this.fetcher.fetchJSON({method:"POST",body:{name:t},path:ft_api().auth().apiKeys().path,tokenType:"refresh"})}fetch(t){return this.fetcher.fetchJSON({method:"GET",path:ft_api().auth().apiKeys().key(t).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:ft_api().auth().apiKeys().path})}delete(t){var r=this;return(0,j.A)(function*(){yield r.fetcher.fetchJSON({method:"DELETE",path:ft_api().auth().apiKeys().key(t).path,tokenType:"refresh"})})()}enable(t){var r=this;return(0,j.A)(function*(){yield r.fetcher.fetchJSON({method:"PUT",path:ft_api().auth().apiKeys().key(t).enable().path,tokenType:"refresh"})})()}disable(t){var r=this;return(0,j.A)(function*(){yield r.fetcher.fetchJSON({method:"PUT",path:ft_api().auth().apiKeys().key(t).disable().path,tokenType:"refresh"})})()}}let br=null;function oe(){if(br)return br;throw new Error("Cannot get environment before it's set")}class Or extends Error{constructor({message:t,code:r}){super(t),this.name="WatchError",this.code=r}}var et=function(e){return e.NEED_DATA="NEED_DATA",e.HAVE_EVENT="HAVE_EVENT",e.HAVE_ERROR="HAVE_ERROR",e}(et||{});class ts{constructor(){this._state=et.NEED_DATA,this._error=null,this._textDecoder=new(oe().TextDecoder),this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(t){this.assertState(et.NEED_DATA),this._buffer+=this._textDecoder.decode(t,{stream:!0}),this.advanceBufferState()}feedLine(t){if(this.assertState(et.NEED_DATA),t.endsWith("\n")&&(t=t.substr(0,t.length-1)),t.endsWith("\r")&&(t=t.substr(0,t.length-1)),0===t.length){if(0===this._dataBuffer.length)return void(this._eventType="");this._dataBuffer.endsWith("\n")&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(":"===t[0])return;const r=t.indexOf(":"),n=t.substr(0,r);let s=-1===r?"":t.substr(r+1);s.startsWith(" ")&&(s=s.substr(1)),"event"===n?this._eventType=s:"data"===n&&(this._dataBuffer+=s,this._dataBuffer+="\n")}feedSse(t){this.assertState(et.NEED_DATA);const r=t.data.indexOf("%");if(-1!==r){let n="",s=0;for(let f=r;-1!==f;f=t.data.indexOf("%",s)){n+=t.data.substr(s,f-s);const a=t.data.substr(f,3);n+="%25"===a?"%":"%0A"===a?"\n":"%0D"===a?"\r":a,s=f+a.length}n+=t.data.substr(s),t.data=n}if(t.eventType&&"message"!==t.eventType){if("error"===t.eventType){this._state=et.HAVE_ERROR,this._error=new Or({message:t.data,code:"unknown"});try{const{error_code:n,error:s}=vt.parse(t.data);if("string"!=typeof n||"string"!=typeof s)return;this._error=new Or({message:s,code:n})}catch{return}}}else{try{const n=vt.parse(t.data);if("object"==typeof n)return this._nextEvent=n,void(this._state=et.HAVE_EVENT)}catch{}this._state=et.HAVE_ERROR,this._error=new Or({message:"server returned malformed event: "+t.data,code:"bad bson parse"})}}get state(){return this._state}nextEvent(){this.assertState(et.HAVE_EVENT);const t=this._nextEvent;return this._state=et.NEED_DATA,this.advanceBufferState(),t}get error(){return this._error}advanceBufferState(){for(this.assertState(et.NEED_DATA);this.state===et.NEED_DATA;){if(this._bufferOffset===this._buffer.length)return this._buffer="",void(this._bufferOffset=0);const t=this._buffer.indexOf("\n",this._bufferOffset);if(-1===t)return void(0!==this._bufferOffset&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0));this.feedLine(this._buffer.substr(this._bufferOffset,t-this._bufferOffset)),this._bufferOffset=t+1}}assertState(t){if(this._state!==t)throw Error(`Expected WatchStream to be in state ${t}, but in state ${this._state}`)}}class es{constructor(t,r,n,s){this.functions=Te.create(t,{serviceName:r}),this.databaseName=n,this.collectionName=s,this.serviceName=r,this.fetcher=t}find(t={},r={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:t,project:r.projection,sort:r.sort,limit:r.limit})}findOne(t={},r={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:t,project:r.projection,sort:r.sort})}findOneAndUpdate(t={},r,n={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:t,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndReplace(t={},r,n={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:t,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndDelete(t={},r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:t,sort:r.sort,projection:r.projection})}aggregate(t){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:t})}count(t={},r={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:t,limit:r.limit})}insertOne(t){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:t})}insertMany(t){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:t})}deleteOne(t={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:t})}deleteMany(t={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:t})}updateOne(t,r,n={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:t,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}updateMany(t,r,n={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:t,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}watch({ids:t,filter:r}={}){const s=this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:t,filter:r}).then(p=>p[Symbol.asyncIterator]()),f=this.watchImpl(s),a=f.return;return Object.assign(f,{return:p=>(s.then(u=>u.return?u.return(p):void 0),a.call(f,p))})}watchImpl(t){return function fi(e){return function(){return new Ht(e.apply(this,arguments))}}(function*(){const r=new ts,n=t.then(d=>({[Symbol.asyncIterator]:()=>d}));var a,s=!1,f=!1;try{for(var u,p=function ci(e){var t,r,n,s=2;for(typeof Symbol<"u"&&(r=Symbol.asyncIterator,n=Symbol.iterator);s--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new ce(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}(yield Fe(n));s=!(u=yield Fe(p.next())).done;s=!1){const d=u.value;if(d){for(r.feedBuffer(d);r.state==et.HAVE_EVENT;)yield r.nextEvent();if(r.state==et.HAVE_ERROR)throw r.error}}}catch(d){f=!0,a=d}finally{try{s&&null!=p.return&&(yield Fe(p.return()))}finally{if(f)throw a}}})()}}function rs(e,t,r,n){return new es(e,t,r,n)}function ns(e,t,r){return{collection:rs.bind(null,e,t,r)}}var kt=function(e){return e.Active="active",e.LoggedOut="logged-out",e.Removed="removed",e}(kt||{});class qn{constructor(t){if(this.app=t.app,this.id=t.id,this.storage=new Vo(this.app.storage,this.id),"accessToken"in t&&"refreshToken"in t&&"providerType"in t)this._accessToken=t.accessToken,this._refreshToken=t.refreshToken,this.providerType=t.providerType,this.storage.accessToken=t.accessToken,this.storage.refreshToken=t.refreshToken,this.storage.providerType=t.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;const r=this.storage.providerType;if(this._profile=this.storage.profile,!r)throw new Error("Storage is missing a provider type");this.providerType=r}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new qo(this.fetcher),this.functions=Te.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(t){this._accessToken=t,this.storage.accessToken=t}get refreshToken(){return this._refreshToken}set refreshToken(t){this._refreshToken=t,this.storage.refreshToken=t}get state(){return this.id in this.app.allUsers?null===this.refreshToken?kt.LoggedOut:kt.Active:kt.Removed}get isLoggedIn(){return this.state===kt.Active}get customData(){if(this.accessToken)return this.decodeAccessToken().userData;throw new Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw new Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw new Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){const t=this.accessToken.split(".")[1];if(t){const n=JSON.parse(Ae_decode(t)).baas_device_id;if("string"==typeof n&&"000000000000000000000000"!==n)return n}}return null}refreshProfile(){var t=this;return(0,j.A)(function*(){const r=yield t.fetcher.fetchJSON({method:"GET",path:ft_api().auth().profile().path});t._profile=new Zn(r),t.storage.profile=t._profile})()}logOut(){var t=this;return(0,j.A)(function*(){try{null!==t._refreshToken&&(yield t.fetcher.fetchJSON({method:"DELETE",path:ft_api().auth().session().path,tokenType:"refresh"}))}catch(r){if(!(r instanceof Error&&r.message.includes("failed to find refresh token")))throw r}finally{t.accessToken=null,t.refreshToken=null}})()}linkCredentials(t){var r=this;return(0,j.A)(function*(){const n=yield r.app.authenticator.authenticate(t,r);if(r.id!==n.userId)throw new Error(`Link response ment for another user (got user id ${n.userId} expected ${r.id})`);r.accessToken=n.accessToken,yield r.refreshProfile()})()}refreshAccessToken(){var t=this;return(0,j.A)(function*(){const r=yield t.fetcher.fetchJSON({method:"POST",path:ft_api().auth().session().path,tokenType:"refresh"}),{access_token:n}=r;if("string"!=typeof n)throw new Error("Expected an 'access_token' in the response");t.accessToken=n})()}refreshCustomData(){var t=this;return(0,j.A)(function*(){return yield t.refreshAccessToken(),t.customData})()}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}callFunction(t,...r){return this.functions.callFunction(t,...r)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(){throw new Error("Not yet implemented")}mongoClient(t){return function is(e,t="mongo-db"){return{db:ns.bind(null,e,t)}}(this.fetcher,t)}decodeAccessToken(){if(this.accessToken){const t=this.accessToken.split(".");if(3!==t.length)throw new Error("Expected an access token with three parts");const n=Ae_decode(t[1]),s=JSON.parse(n),{exp:f,iat:a,sub:p,user_data:u={}}=s;if("number"!=typeof f)throw new Error("Failed to decode access token 'exp'");if("number"!=typeof a)throw new Error("Failed to decode access token 'iat'");return{expires:f,issuedAt:a,subject:p,userData:u}}throw new Error("Missing an access token")}}class ct{static anonymous(t=!0){return new ct("anon-user","anon-user",t,{})}static apiKey(t){return new ct("api-key","api-key",!1,{key:t})}static emailPassword(t,r){return new ct("local-userpass","local-userpass",!1,{username:t,password:r})}static function(t){return new ct("custom-function","custom-function",!1,t)}static jwt(t){return new ct("custom-token","custom-token",!1,{token:t})}static google(t){return new ct("oauth2-google","oauth2-google",!1,ct.derivePayload(t))}static derivePayload(t){if("string"==typeof t)throw new Error("`google(<tokenString>)` has been deprecated.  Please use `google(<authCodeObject>).");if(1===Object.keys(t).length){if("authCode"in t||"redirectUrl"in t)return t;if("idToken"in t)return{id_token:t.idToken};throw new Error("Unexpected payload: "+JSON.stringify(t))}throw new Error("Expected only one property in payload, got "+JSON.stringify(t))}static facebook(t){return new ct("oauth2-facebook","oauth2-facebook",!1,t.includes("://")?{redirectUrl:t}:{accessToken:t})}static apple(t){return new ct("oauth2-apple","oauth2-apple",!1,t.includes("://")?{redirectUrl:t}:{id_token:t})}constructor(t,r,n,s){this.providerName=t,this.providerType=r,this.reuse=n,this.payload=s}}const Qn="userIds",ti="deviceId";class as extends Be{constructor(t,r){super(t,`app(${r})`)}getUserIds(){const t=this.get(Qn),r=t?JSON.parse(t):[];if(Array.isArray(r))return[...new Set(r)];throw new Error("Expected the user ids to be an array")}setUserIds(t,r){if(r){const n=this.getUserIds();for(const s of n)-1===t.indexOf(s)&&t.push(s)}this.set(Qn,JSON.stringify(t))}removeUserId(t){const n=this.getUserIds().filter(s=>s!==t);this.setUserIds(n,!1)}getDeviceId(){return this.get(ti)}setDeviceId(t){this.set(ti,t)}}const us={_baas_client_app_id:"appId",_baas_ua:"userAuth",_baas_link:"link",_baas_error:"error",_baas_state:"state"};class At{static parseRedirectLocation(t){const r=function Ho(e){const t="?"===e[0]?e.substr(1):e;return Object.fromEntries(t.split("&").filter(r=>r.length>0).map(r=>r.split("=")).map(([r,n])=>[r,decodeURIComponent(n)]))}(t),n={};for(const[s,f]of Object.entries(us)){const a=r[s];a&&(n[f]=a)}return n}static handleRedirect(t,r=oe().defaultStorage){const n=At.parseRedirectLocation(t),{state:s,error:f}=n;if("string"!=typeof s)throw f?new Error(`Failed to handle OAuth 2.0 redirect: ${f}`):new Error("Failed to handle OAuth 2.0 redirect.");{const a=r.prefix("oauth2");At.getStateStorage(a,s).set("result",JSON.stringify(n))}}static decodeAuthInfo(t){const r=(t||"").split("$");if(4===r.length){const[n,s,f,a]=r;return{accessToken:n,refreshToken:s,userId:f,deviceId:a}}throw new Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(t,r){return t.prefix(`state(${r})`)}constructor(t,r=oe().openWindow){this.storage=t.prefix("oauth2"),this.openWindow=r}openWindowAndWaitForRedirect(t,r){const n=At.getStateStorage(this.storage,r);return new Promise((s,f)=>{let p,a=null;const u=()=>{const d=n.get("result");if(d){const g=JSON.parse(d);n.removeListener(u),n.clear();try{a&&(clearInterval(p),a.close())}catch(h){console.warn(`Failed closing redirect window: ${h}`)}finally{s(g)}}};n.addListener(u),a=this.openWindow(t),p=setInterval(()=>{if(a){if(a.closed){clearInterval(p),n.removeListener(u);const d=new Error("Window closed");f(d)}}else clearInterval(p)},100)})}generateState(){return function Yo(e,t){let r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}(12,"abcdefghijklmnopqrstuvwxyz")}}const ei="x-baas-location";class hs{constructor(t,r,n){this.fetcher=t,this.oauth2=new At(r),this.getDeviceInformation=n}authenticate(t,r){var n=this;return(0,j.A)(function*(){const s=n.getDeviceInformation(),f="object"==typeof r;if(t.providerType.startsWith("oauth2")&&"string"==typeof t.payload.redirectUrl){const a=n.oauth2.generateState(),p=yield n.getLogInUrl(t,f,{state:a,redirect:t.payload.redirectUrl,providerRedirectHeader:!!f||void 0,device:f?void 0:s.encode()});if(f){const d=(yield n.fetcher.fetch({method:"GET",url:p,tokenType:f?"access":"none",user:r,mode:"cors",credentials:"include"})).headers.get(ei);if(d)return n.openWindowAndWaitForAuthResponse(d,a);throw new Error(`Missing ${ei} header`)}return n.openWindowAndWaitForAuthResponse(p,a)}{const a=yield n.getLogInUrl(t,f),p=yield n.fetcher.fetchJSON({method:"POST",url:a,body:{...t.payload,options:{device:s.toJSON()}},tokenType:f?"access":"none",user:r}),{user_id:u,access_token:d,refresh_token:g=null,device_id:h}=p;if("string"!=typeof u)throw new Error("Expected a user id in the response");if("string"!=typeof d)throw new Error("Expected an access token in the response");if("string"!=typeof g&&null!==g)throw new Error("Expected refresh token to be a string or null");if("string"!=typeof h)throw new Error("Expected device id to be a string");return{userId:u,accessToken:d,refreshToken:g,deviceId:h}}})()}getLogInUrl(t,r=!1,n={}){var s=this;return(0,j.A)(function*(){const a=s.fetcher.appRoute.authProvider(t.providerName).login(),p=Kn({link:r?"true":void 0,...n});return(yield s.fetcher.locationUrl)+a.path+p})()}openWindowAndWaitForAuthResponse(t,r){var n=this;return(0,j.A)(function*(){const s=yield n.oauth2.openWindowAndWaitForRedirect(t,r);return At.decodeAuthInfo(s.userAuth)})()}}class xe extends Error{static fromRequestAndResponse(t,r,n){return(0,j.A)(function*(){var s;const{method:f="unknown"}=r,{status:a,statusText:p}=n;if(null!==(s=n.headers.get("content-type"))&&void 0!==s&&s.startsWith("application/json")){const u=yield n.json();if("object"==typeof u&&u){const{error:d,error_code:g,link:h}=u;return new xe(f,t,a,p,"string"==typeof d?d:void 0,"string"==typeof g?g:void 0,"string"==typeof h?h:void 0)}}return new xe(f,t,a,p)})()}constructor(t,r,n,s,f,a,p){const u=s?`status ${n} ${s}`:`status ${n}`;super("string"==typeof f?`Request failed (${t} ${r}): ${f} (${u})`:`Request failed (${t} ${r}): (${u})`),this.method=t,this.url=r,this.statusText=s,this.statusCode=n,this.error=f,this.errorCode=a,this.link=p}}class $t{static buildAuthorizationHeader(t,r){if(!t||"none"===r)return{};if("access"===r)return{Authorization:`Bearer ${t.accessToken}`};if("refresh"===r)return{Authorization:`Bearer ${t.refreshToken}`};throw new Error(`Unexpected token type (${r})`)}static buildBody(t){if(t){if("object"==typeof t&&null!==t)return JSON.stringify(Hn(t));if("string"==typeof t)return t;throw console.log("body is",t),new Error("Unexpected type of body")}}static buildJsonHeader(t){return t&&t.length>0?{"Content-Type":"application/json"}:{}}constructor(t){this.config=t}clone(t){return new $t({...this.config,...t})}fetch(t){var r=this;return(0,j.A)(function*(){const{path:n,url:s,tokenType:f="access",user:a=r.config.userContext.currentUser,...p}=t;if("string"==typeof n&&"string"==typeof s)throw new Error("Use of 'url' and 'path' mutually exclusive");if("string"==typeof n){const u=(yield r.config.locationUrlContext.locationUrl)+n;return r.fetch({...t,path:void 0,url:u})}if("string"==typeof s){const u=yield r.config.fetch(s,{...p,headers:{...$t.buildAuthorizationHeader(a,f),...t.headers}});if(u.ok)return u;{const d=yield xe.fromRequestAndResponse(s,t,u);if(a&&401===u.status&&("InvalidSession"===d.errorCode||"unauthorized"===d.error)){if("access"===f)return yield a.refreshAccessToken(),r.fetch({...t,user:a});"refresh"===f&&(a.accessToken=null,a.refreshToken=null)}throw d}}throw new Error("Expected either 'url' or 'path'")})()}fetchJSON(t){var r=this;return(0,j.A)(function*(){const{body:n}=t,s=$t.buildBody(n),f=$t.buildJsonHeader(s),a=yield r.fetch({...t,body:s,headers:{Accept:"application/json",...f,...t.headers}}),p=a.headers.get("content-type");if(null!=p&&p.startsWith("application/json"))return Gn(yield a.json());if(null===p)return null;throw new Error(`Expected JSON response, got "${p}"`)})()}fetchStream(t){var r=this;return(0,j.A)(function*(){return function ls({body:e}){if("object"!=typeof e||null===e)throw new Error("Expected a non-null object");if("getReader"in e)return{[Symbol.asyncIterator](){const t=e.getReader();return{next:()=>(0,j.A)(function*(){const{done:r,value:n}=yield t.read();if(r)return{done:r,value:void 0};if(n instanceof Uint8Array)return{done:r,value:n};throw new Error("Expected value to be Uint8Array")})(),return:()=>(0,j.A)(function*(){return yield t.cancel(),{done:!0,value:null}})()}}};throw new Error("Expected an AsyncIterable or a ReadableStream")}(yield r.fetch({...t,headers:{Accept:"text/event-stream",...t.headers}}))})()}get appRoute(){return ft_api().app(this.config.appId)}get locationUrl(){return this.config.locationUrlContext.locationUrl}}class ys{constructor({appId:t,appVersion:r,deviceId:n}){this.sdkVersion="2.0.1";const s=oe();this.platform=s.platform,this.platformVersion=s.platformVersion,this.appId=t,this.appVersion=r,this.deviceId=n}encode(){const t=Sr(this);return Ae_encode(JSON.stringify(t))}toJSON(){return Sr(this)}}let ri=(()=>{class e{static getApp(r){if(r in e.appCache)return e.appCache[r];{const n=new e(r);return e.appCache[r]=n,n}}constructor(r){var n;this.users=[],this._locationUrl=null;const s="string"==typeof r?{id:r}:r;if("object"!=typeof s||"string"!=typeof s.id)throw new Error("Missing an Atlas App Services app-id");this.id=s.id,this.baseUrl=s.baseUrl||"https://services.cloud.mongodb.com",s.skipLocationRequest&&(this._locationUrl=Promise.resolve(this.baseUrl)),this.localApp=s.app,this.fetcher=new $t({appId:this.id,userContext:this,locationUrlContext:this,fetch:null!==(n=s.fetch)&&void 0!==n?n:Ro}),this.emailPasswordAuth=new Zo(this.fetcher);const f=s.storage||oe().defaultStorage;this.storage=new as(f,this.id),this.authenticator=new hs(this.fetcher,f,()=>this.deviceInformation);try{this.hydrate()}catch(a){this.storage.clear(),console.warn("Realm app hydration failed:",a instanceof Error?a.message:a)}}switchUser(r){const n=this.users.findIndex(f=>f===r);if(-1===n)throw new Error("The user was never logged into this app");const[s]=this.users.splice(n,1);this.users.unshift(s)}logIn(r,n=!0){var s=this;return(0,j.A)(function*(){if(r.reuse){const u=s.users.find(d=>d.providerType===r.providerType);if(u)return s.switchUser(u),n&&(yield u.refreshProfile()),u}const f=yield s.authenticator.authenticate(r),a=s.createOrUpdateUser(f,r.providerType);s.switchUser(a),n&&(yield a.refreshProfile()),s.storage.setUserIds(s.users.map(u=>u.id),!0);const p=f.deviceId;return p&&"000000000000000000000000"!==p&&s.storage.set("deviceId",p),a})()}removeUser(r){var n=this;return(0,j.A)(function*(){const s=n.users.findIndex(f=>f===r);if(-1===s)throw new Error("The user was never logged into this app");n.users.splice(s,1),yield r.logOut(),n.storage.remove(`user(${r.id}):profile`),n.storage.removeUserId(r.id)})()}deleteUser(r){var n=this;return(0,j.A)(function*(){yield n.fetcher.fetchJSON({method:"DELETE",path:ft_api().auth().delete().path}),yield n.removeUser(r)})()}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}get currentUser(){const r=this.users.filter(n=>n.state===kt.Active);return 0===r.length?null:r[0]}get allUsers(){return Object.fromEntries(this.users.map(r=>[r.id,r]))}get locationUrl(){if(!this._locationUrl){const r=ft_api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+r,tokenType:"none"}).then(n=>{if("object"!=typeof n)throw new Error("Expected response body be an object");return n}).then(({hostname:n})=>{if("string"!=typeof n)throw new Error("Expected response to contain a 'hostname'");return n}).catch(n=>{throw this._locationUrl=null,n})}return this._locationUrl}get deviceInformation(){const r=this.storage.getDeviceId(),n="string"==typeof r&&"000000000000000000000000"!==r?new z(r):void 0;return new ys({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:n})}createOrUpdateUser(r,n){const s=this.users.find(f=>f.id===r.userId);if(s)return s.accessToken=r.accessToken,s.refreshToken=r.refreshToken,s;{if(!r.refreshToken)throw new Error("No refresh token in response from server");const f=new qn({app:this,id:r.userId,accessToken:r.accessToken,refreshToken:r.refreshToken,providerType:n});return this.users.unshift(f),f}}hydrate(){const r=this.storage.getUserIds();this.users=r.map(n=>new qn({app:this,id:n}))}}return e.appCache={},e.Credentials=ct,e})();const Ie=function(e){return e&&e.Math==Math&&e},Wt=Ie("object"==typeof globalThis&&globalThis)||Ie("object"==typeof window&&window)||Ie("object"==typeof self&&self)||Ie("object"==typeof global&&global)||function(){return this}()||Function("return this")();typeof __DEV__<"u"&&__DEV__;const Jt=function Ao(e){return e?Bn(e):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new So:typeof navigator<"u"?Bn(navigator.userAgent):function xo(){return typeof process<"u"&&process.version?new vo(process.version.slice(1)):null}()}();!function Qo(e){br=e}({defaultStorage:(new("localStorage"in Wt?class ms{constructor(){if("object"!=typeof Wt.localStorage)throw new Error("Cannot use LocalStorage without a global localStorage object");this.global=Wt}get(t){return this.global.localStorage.getItem(t)}set(t,r){return this.global.localStorage.setItem(t,r)}remove(t){return this.global.localStorage.removeItem(t)}prefix(t){return new Be(this,t)}clear(t){const r=[];for(let n=0;n<this.global.localStorage.length;n++){const s=this.global.localStorage.key(n);s&&(!t||s.startsWith(t))&&r.push(s)}for(const n of r)this.global.localStorage.removeItem(n)}addListener(t){return this.global.addEventListener("storage",t)}removeListener(t){return this.global.removeEventListener("storage",t)}}:class Jo{constructor(){this.storage={},this.listeners=new Set}get(t){return t in this.storage?this.storage[t]:null}set(t,r){this.storage[t]=r,this.fireListeners()}remove(t){delete this.storage[t],this.fireListeners()}prefix(t){return new Be(this,t)}clear(t){for(const r of Object.keys(this.storage))(!t||r.startsWith(t))&&delete this.storage[r];this.fireListeners()}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}fireListeners(){this.listeners.forEach(t=>t())}})).prefix("realm-web"),openWindow:function _s(e){return"function"==typeof Wt.open?Wt.open(e):(console.log(`Please open ${e}`),null)},platform:(null==Jt?void 0:Jt.name)||"web",platformVersion:(null==Jt?void 0:Jt.version)||"0.0.0",TextDecoder});var R=dt(3953);let Es=(()=>{var e;class t{ngOnInit(){}constructor(n){this.modalCtrl=n,this.name="kastkaar"}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.modalCtrl.dismiss(this.name,"confirm")}}return(e=t).\u0275fac=function(n){return new(n||e)(R.rXU(V.W3))},e.\u0275cmp=R.VBU({type:e,selectors:[["app-order-form"]],inputs:{modal:"modal"},decls:13,vars:2,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["labelPlacement","stacked","label","Enter your name","placeholder","Your name",3,"ngModelChange","ngModel"]],template:function(n,s){1&n&&(R.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),R.bIt("click",function(){return s.cancel()}),R.EFF(4,"Cancel"),R.k0s()(),R.j41(5,"ion-title"),R.EFF(6,"Welcome"),R.k0s(),R.j41(7,"ion-buttons",2)(8,"ion-button",3),R.bIt("click",function(){return s.confirm()}),R.EFF(9,"Confirm"),R.k0s()()()(),R.j41(10,"ion-content",4)(11,"ion-item")(12,"ion-input",5),R.mxI("ngModelChange",function(a){return R.DH7(s.name,a)||(s.name=a),a}),R.k0s()()()),2&n&&(R.R7$(8),R.Y8G("strong",!0),R.R7$(4),R.R50("ngModel",s.name))},dependencies:[V.Jm,V.QW,V.W9,V.eU,V.$w,V.uz,V.BC,V.ai,V.Gw,De.BC,De.vS]}),t})();const Ss=[{path:"",component:(()=>{var e;class t{constructor(n){this.modalCtrl=n,this.env=true,this.app=new ri({id:"application-0-hyrkfaf"})}ngOnInit(){this.logIn()}logIn(){var n=this;return(0,j.A)(function*(){const s=ct.anonymous(),f=yield n.app.logIn(s);console.assert(f.id===n.app.currentUser.id);const a=yield f.functions.Get_data();console.log(a)})()}openModal(){var n=this;return(0,j.A)(function*(){const f=yield n.modalCtrl.create({component:Es,initialBreakpoint:.75,breakpoints:[.25,.5,.75,1],componentProps:{data:"data"}});f.present(),yield f.onWillDismiss()})()}}return(e=t).\u0275fac=function(n){return new(n||e)(R.rXU(V.W3))},e.\u0275cmp=R.VBU({type:e,selectors:[["app-tab1"]],decls:9,vars:2,consts:[[3,"translucent"],[3,"fullscreen"],[2,"text-align","center"],["id","open-modal",3,"click"],["name","add-circle"]],template:function(n,s){1&n&&(R.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),R.EFF(3," New Order "),R.k0s()()(),R.j41(4,"ion-content",1)(5,"ion-card")(6,"ion-card-content",2)(7,"ion-button",3),R.bIt("click",function(){return s.openModal()}),R.nrm(8,"ion-icon",4),R.k0s()()()()),2&n&&(R.Y8G("translucent",!0),R.R7$(4),R.Y8G("fullscreen",!0))},dependencies:[V.Jm,V.b_,V.I9,V.W9,V.eU,V.iq,V.BC,V.ai]}),t})()}];let bs=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275mod=R.$C({type:e}),e.\u0275inj=R.G2t({imports:[Br.iI.forChild(Ss),Br.iI]}),t})(),Os=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275mod=R.$C({type:e}),e.\u0275inj=R.G2t({imports:[V.bv,ai.MD,De.YN,bs]}),t})()}}]);